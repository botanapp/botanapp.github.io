(this.webpackJsonpbotan=this.webpackJsonpbotan||[]).push([[0],{212:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},219:function(e,t){},267:function(e,t,a){},270:function(e,t,a){},271:function(e,t,a){},272:function(e,t,a){},313:function(e,t,a){},314:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},317:function(e,t,a){},318:function(e,t,a){},319:function(e,t,a){},320:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},324:function(e,t,a){},328:function(e,t,a){},329:function(e,t,a){},330:function(e,t,a){},331:function(e,t,a){},332:function(e,t,a){},345:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},348:function(e,t,a){},349:function(e,t,a){},350:function(e,t,a){},351:function(e,t,a){},352:function(e,t,a){},353:function(e,t,a){},354:function(e,t,a){},355:function(e,t,a){},356:function(e,t,a){},357:function(e,t,a){},358:function(e,t,a){},359:function(e,t,a){},360:function(e,t,a){},361:function(e,t,a){},362:function(e,t,a){},363:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a.n(c),n=a(36),s=a.n(n),i=(a(212),function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,391)).then((function(t){var a=t.getCLS,c=t.getFID,r=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),c(e),r(e),n(e),s(e)}))}),o=a(50),l=a(21),u=a(4),d=a.n(u),b=a(10),j=a(3),f=a(19),p=(a(214),a(375)),h=(a(215),a(0)),O=function(){var e=Object(c.useContext)(Ge),t=e.errorsState.errors,a=e.errorsDispatch;return Object(h.jsx)("div",{className:"ErrorsAlerts",children:t.length>0&&Object(h.jsxs)(p.a,{variant:"danger",onClose:function(){a({type:"cleanErrors"})},dismissible:!0,children:[Object(h.jsx)(p.a.Heading,{children:"Ups! Something went wrong!"}),t.map((function(e){return Object(h.jsx)("p",{children:"\u2014 ".concat(e)},e)})),"Contact us via"," ",Object(h.jsx)(p.a.Link,{onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:"Telegram"})]})})},m=a(15),v=a(2),x=a(9),y=a.n(x),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=null;try{t=JSON.parse(localStorage.getItem("botsFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},_={list:[],hasMore:!0,limit:15,offset:0,filters:{scope:"enabled",type:"",account:"",sorting:"created_at-desc"},bots:{}};function C(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewBotsList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return a.length>0?Object(v.a)(Object(v.a)({},e),{},{list:[a[0]],bots:c}):Object(v.a)(Object(v.a)({},e),{},{list:a,bots:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToBotsList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return r.length>0?Object(v.a)(Object(v.a)({},e),{},{list:[r[0]],bots:Object(v.a)(Object(v.a)({},e.bots),n)}):Object(v.a)(Object(v.a)({},e),{},{list:r,bots:Object(v.a)(Object(v.a)({},e.bots),n)});case"setBotsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setBotsFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setBot":return Object(v.a)(Object(v.a)({},e),{},{bots:Object(v.a)(Object(v.a)({},e.bots),{},Object(m.a)({},t.payload.botId,t.payload.bot))});default:throw new Error}}var S={deals:{},activeDeals:{}};function B(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"getDealsList":return Object(v.a)(Object(v.a)({},e),{},{deals:Object(v.a)(Object(v.a)({},e.deals),{},Object(m.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.deals[t.payload.botId]),{},{list:t.payload.deals,period:t.payload.periodInDays})))});case"getActiveDealsList":return Object(v.a)(Object(v.a)({},e),{},{activeDeals:Object(v.a)(Object(v.a)({},e.activeDeals),{},Object(m.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.activeDeals[t.payload.botId]),{},{list:t.payload.activeDeals})))});case"setOffset":return Object(v.a)(Object(v.a)({},e),{},{deals:Object(v.a)(Object(v.a)({},e.deals),{},Object(m.a)({},t.payload.botId,Object(v.a)(Object(v.a)({},e.deals[t.payload.botId]),{},{offset:t.payload.offset})))});case"resetDeals":if(t.payload.botId in e.deals){var a=y.a.omit(e.deals,[t.payload.botId]);return Object(v.a)(Object(v.a)({},e),{},{deals:a})}return Object(v.a)({},e);case"resetActiveDeals":if(t.payload.botId in e.activeDeals){var c=y.a.omit(e.activeDeals,[t.payload.botId]);return Object(v.a)(Object(v.a)({},e),{},{activeDeals:c})}return Object(v.a)({},e);default:throw new Error}}var w=a(164),N=a.n(w),T=a(165),k=a.n(T),D=new k.a({reservoir:13,reservoirRefreshAmount:13,reservoirRefreshInterval:1e3}),I={id:"DEAL_LIMITER",reservoir:0,reservoirRefreshAmount:1,reservoirRefreshInterval:1e3,minTime:1e3,maxConcurrent:1,clearDatastore:!0,timeout:2e3},A=new URLSearchParams(window.location.search).get("api_key")||"",F=new URLSearchParams(window.location.search).get("secret")||"",P=new k.a(I);function M(e){P=new k.a(Object(v.a)(Object(v.a)({},I),{},{id:e}))}function E(){return P}function R(e,t){return N.a.algo.HMAC.create(N.a.algo.SHA256,t).update(e).finalize().toString(N.a.enc.Hex)}var H=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:D;return a.schedule((function(){return fetch("https://api.3commas.io".concat(t),{method:e,headers:{APIKEY:A,Signature:R(t,F)}})}))},L=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c,r,n,s){var i,o,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=p.length>6&&void 0!==p[6]&&p[6],o=c.split("-"),l=Object(j.a)(o,2),u=l[0],b=l[1],f=function(){return"/public/api/ver1/bots?offset=".concat(i?0:t,"&limit=").concat(a,"&sort_by=").concat(u,"&sort_direction=").concat(b).concat(r?"&scope=".concat(r):"").concat(n?"&strategy=".concat(n):"").concat(s?"&account_id=".concat(s):"")},e.abrupt("return",H("GET",f()).then((function(e){return e.json()})));case 4:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s){return e.apply(this,arguments)}}(),Y=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c,r,n){var s,i,o,l,u,b,f,p=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=p.length>5&&void 0!==p[5]?p[5]:"enabled",i=c.split("-"),o=Object(j.a)(i,2),l=o[0],u=o[1],b=n.map((function(e){return"&account_types[]=".concat(e)})).join(""),f=function(){return"/public/api/ver1/grid_bots?offset=".concat(t,"&limit=").concat(a,"&sort_by=").concat(l,"&sort_direction=").concat(u).concat(r?"&account_ids[]=".concat(r):b).concat(s?"&state=".concat(s):"")},e.abrupt("return",H("GET",f()).then((function(e){return e.json()})));case 5:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n){return e.apply(this,arguments)}}(),G=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c,r,n,s,i,o){var l,u,b,f,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l=c.split("-"),u=Object(j.a)(l,2),b=u[0],f=u[1],p=function(){return"/public/api/v2/smart_trades?page=".concat(t,"&per_page=").concat(a,"&order_by=").concat(b,"&order_direction=").concat(f).concat(r?"&account_id=".concat(r):"").concat(n?"&type=".concat(n):"").concat(s?"&pair=".concat(s):"","&status=").concat(i).concat(o?"&from=".concat(o):"")},e.abrupt("return",H("GET",p()).then((function(e){return e.json()})));case 3:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s,i,o){return e.apply(this,arguments)}}(),U=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/v2/smart_trades/".concat(t,"/trades")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/bots/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/grid_bots/".concat(t,"/profits")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/grid_bots/".concat(t,"/market_orders")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/deals/".concat(t,"/show")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/accounts?page=".concat(t,"&per_page=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),K=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/accounts/".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("POST","/public/api/ver1/accounts/".concat(t,"/pie_chart_data")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/accounts/".concat(t,"/active_trading_entities")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/accounts/".concat(t,"/balance_chart_data?date_from=").concat(a)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c,r,n){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/deals?bot_id=".concat(t,"&offset=").concat(a,"&limit=").concat(c,"&scope=").concat(r,"&order=").concat(n),P).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n){return e.apply(this,arguments)}}(),te=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("GET","/public/api/ver1/marketplace/items?&limit=1000").then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ae=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H("GET","/public/api/ver1/bots/stats?bot_id=".concat(t)).then((function(e){return e.json()}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ce=function(){var e=Object(b.a)(d.a.mark((function e(t){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("GET","/public/api/ver1/mini_apps/storage?key=".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),re=function(){var e=Object(b.a)(d.a.mark((function e(t,a){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",H("POST","/public/api/ver1/mini_apps/storage?key=".concat(t,"&data=").concat(encodeURI(JSON.stringify(a)))).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ne=a(28),se=(a(266),a(205)),ie=(a(267),function(){var e=Object(c.useState)("DCA"),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(l.g)(),s=Object(l.f)();return Object(c.useEffect)((function(){"/"===s.pathname?r("DCA"):"/gridbots"===s.pathname?r("grid"):"/smarttrades"===s.pathname?r("smarttrades"):"/accounts"===s.pathname&&r("accounts")}),[s]),Object(h.jsxs)("div",{className:"NavBar",children:[Object(h.jsxs)("div",{className:"NavBarContainer",children:[Object(h.jsx)("div",{className:"LogoContainer",children:Object(h.jsx)("img",{className:"Logo",src:"/BotAn__icon.png",alt:"logo"})}),Object(h.jsx)("div",{className:"Navigation",children:Object(h.jsxs)(se.a,{children:[Object(h.jsx)(se.a.Item,{children:Object(h.jsx)(se.a.Link,{active:"DCA"===a,onClick:function(){n({pathname:"/",search:window.location.search})},children:"DCA Bots"})}),Object(h.jsx)(se.a.Item,{children:Object(h.jsx)(se.a.Link,{active:"grid"===a,onClick:function(){n({pathname:"/gridbots",search:window.location.search})},children:"Grid Bots"})}),Object(h.jsx)(se.a.Item,{children:Object(h.jsx)(se.a.Link,{active:"smarttrades"===a,onClick:function(){n({pathname:"/smarttrades",search:window.location.search})},children:"Smart Trades"})}),Object(h.jsx)(se.a.Item,{children:Object(h.jsx)(se.a.Link,{active:"accounts"===a,onClick:function(){n({pathname:"/accounts",search:window.location.search})},children:"Accounts"})})]})}),Object(h.jsxs)("div",{className:"CommunityLink",onClick:function(){window.open("https://t.me/BotAnMainChat","_blank")},children:[Object(h.jsx)("span",{className:"SupportLabel",children:"Community"}),Object(h.jsx)("img",{className:"TelegramIcon",src:"image 8.png",alt:"logo"})]})]}),Object(h.jsxs)(p.a,{variant:"warning",children:["This is the FREE version of the BotAn App - the best bot analysis tool for 3Commas. Free version is limited to show only one bot/trade. Please subscribe to the BotAn PRO to get all benefits here:"," ",Object(h.jsx)(p.a.Link,{href:"https://3commas.io/d/apps/119",children:"https://3commas.io/d/apps/119"}),"."]},"danger2")]})}),oe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=null;try{t=JSON.parse(localStorage.getItem("GridBotsFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},le={list:[],hasMore:!0,limit:10,offset:0,filters:{accountType:"spot",account:"",sorting:"created_at-desc"},gridBots:{}};function ue(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewGridBotsList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return a.length>0?Object(v.a)(Object(v.a)({},e),{},{list:[a[0]],gridBots:c}):Object(v.a)(Object(v.a)({},e),{},{list:a,gridBots:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToGridBotsList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return r.length>0?Object(v.a)(Object(v.a)({},e),{},{list:[r[0]],gridBots:Object(v.a)(Object(v.a)({},e.gridBots),n)}):Object(v.a)(Object(v.a)({},e),{},{list:r,gridBots:Object(v.a)(Object(v.a)({},e.gridBots),n)});case"setGridBotsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setGridBotsFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setGridBot":return Object(v.a)(Object(v.a)({},e),{},{gridBots:Object(v.a)(Object(v.a)({},e.gridBots),{},Object(m.a)({},t.payload.gridBotId,t.payload.gridBot))});default:throw new Error}}var de=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=null;try{t=JSON.parse(localStorage.getItem("smartTradesFiltersState"))}catch(a){}return t?Object(v.a)(Object(v.a)({},e),{},{filters:t}):e},be={list:[],hasMore:!0,limit:100,offset:1,filters:{accountId:"",sorting:"created_at-desc",type:"",status:"all",from:{label:"month",from:"",to:""},pair:""},smartTrades:{}};function je(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:be,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"setNewSmartTradesList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return a.length>0?Object(v.a)(Object(v.a)({},e),{},{list:[a[0]],smartTrades:c}):Object(v.a)(Object(v.a)({},e),{},{list:a,smartTrades:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToSmartTradesList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return r.length>0?Object(v.a)(Object(v.a)({},e),{},{list:[r[0]],smartTrades:Object(v.a)(Object(v.a)({},e.smartTrades),n)}):Object(v.a)(Object(v.a)({},e),{},{list:r,smartTrades:Object(v.a)(Object(v.a)({},e.smartTrades),n)});case"setSmartTradesOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setSmartTradesFilters":return Object(v.a)(Object(v.a)({},e),{},{filters:t.payload});case"setSmartTrade":return Object(v.a)(Object(v.a)({},e),{},{smartTrades:Object(v.a)(Object(v.a)({},e.smartTrades),{},Object(m.a)({},t.payload.smartTradeId,t.payload.smartTrade))});default:throw new Error}}var fe={offset:0,hasMore:!1,list:[],limit:100,accounts:{},accountTableData:{},accountPieChartData:{},accountActiveTradingEntities:{}};function pe(e,t){switch(t.type){case"setNewAccountsList":var a=t.payload.map((function(e){return e.id})),c=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:a,accounts:c});case"setHasMore":return Object(v.a)(Object(v.a)({},e),{},{hasMore:t.payload});case"addToAccountsList":var r=t.payload.map((function(e){return e.id})),n=y.a.keyBy(t.payload,"id");return Object(v.a)(Object(v.a)({},e),{},{list:[].concat(Object(f.a)(e.list),Object(f.a)(r)),accounts:Object(v.a)(Object(v.a)({},e.accounts),n)});case"setAccountsOffset":return Object(v.a)(Object(v.a)({},e),{},{offset:t.payload});case"setAccount":return Object(v.a)(Object(v.a)({},e),{},{accounts:Object(v.a)(Object(v.a)({},e.accounts),{},Object(m.a)({},t.payload.accountId,t.payload.account))});case"setAccountTableData":return Object(v.a)(Object(v.a)({},e),{},{accountTableData:Object(v.a)(Object(v.a)({},e.accountTableData),{},Object(m.a)({},t.payload.accountId,t.payload.accountTableData))});case"setAccountPieChartData":return Object(v.a)(Object(v.a)({},e),{},{accountPieChartData:Object(v.a)(Object(v.a)({},e.accountPieChartData),{},Object(m.a)({},t.payload.accountId,t.payload.accountPieChartData))});case"setAccountActiveTradingEntities":return Object(v.a)(Object(v.a)({},e),{},{accountActiveTradingEntities:Object(v.a)(Object(v.a)({},e.accountActiveTradingEntities),{},Object(m.a)({},t.payload.accountId,t.payload.accountActiveTradingEntities))});default:throw new Error}}var he=function(e){return{type:"setNewAccountsList",payload:e}},Oe=function(e){return{type:"setHasMore",payload:e}},me=function(e){return{type:"addToAccountsList",payload:e}},ve=function(e,t){return{type:"setAccount",payload:{accountId:e,account:t}}},xe=function(e,t){return{type:"setAccountTableData",payload:{accountId:e,accountTableData:t}}},ye=function(e,t){return{type:"setAccountPieChartData",payload:{accountId:e,accountPieChartData:t}}},ge=function(e,t){return{type:"setAccountActiveTradingEntities",payload:{accountId:e,accountActiveTradingEntities:t}}};function _e(){return(_e=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Oe(!0)),t(he([])),n=a.limit,s=r||n,e.prev=4,i=!0,o=1;case 7:if(!i){e.next=18;break}return e.next=10,W(o,s);case 10:if(!(l=e.sent).error){e.next=13;break}return e.abrupt("break",18);case 13:t(me(l)),o+=1,l.length<s&&(i=!1),e.next=7;break;case 18:t(Oe(!1)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),t(he([])),t(Oe(!1)),c({type:"addError",payload:"Error when fetching accounts list"});case 26:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function Ce(e,t,a,c){return Se.apply(this,arguments)}function Se(){return(Se=Object(b.a)(d.a.mark((function e(t,a,c,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K(r);case 3:n=e.sent,t(ve(r,n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"addError",payload:"Error when fetching account ".concat(r)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function Be(e,t,a,c){return we.apply(this,arguments)}function we(){return(we=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.accountTableData,e.prev=1,r in n){e.next=7;break}return e.next=5,J(r);case 5:s=e.sent,t(xe(r,s));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"addError",payload:"Error when fetching account table data"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function Ne(e,t,a,c){return Te.apply(this,arguments)}function Te(){return(Te=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.accountPieChartData,e.prev=1,r in n){e.next=7;break}return e.next=5,Z(r);case 5:s=e.sent,t(ye(r,s));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"addError",payload:"Error when fetching account pie chart data"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function ke(){return(ke=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.accountActiveTradingEntities,e.prev=1,r in n){e.next=7;break}return e.next=5,Q(r);case 5:s=e.sent,t(ge(r,s));case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),c({type:"addError",payload:"Error when fetching account active trading entities data"});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}var De=a(376),Ie=" DISCLAIMER: This application and all of its content is provided for informational and entertainment purposes only. We do not provide financial, investment, legal or tax advice. We are not a broker/dealer and we are not an investment advisor. All content on this website is not, and should not be regarded as \u201cinvestment advice\u201d or as a \u201crecommendation\u201d regarding a course of action. Always consult an independent financial professional before adopting any suggestion contained in, drawing any inference from or taking any other action in reliance on any content on this website that addresses financial, investment, tax and legal issues. We are not responsible for any adverse consequences of any financial, investment, tax and legal decision made based on the content on this website, including without limitation any loss of profit, which may arise directly or indirectly from use of or reliance on such content. RISK WARNING: Trading of and investing in cryptocurrencies and other investment products can carry a high level of risk, and may not be suitable for all investors. Trading and investing generally is not appropriate for someone with limited resources and limited investment or trading experience and low risk tolerance. You could sustain a total loss of your investment. Therefore, you should not speculate with capital that you cannot afford to lose. You should always understand that past performance is not necessarily indicative of future performance. Before trading and investing you should carefully consider your objectives, risk tolerance, financial resources, needs, your level of experience and other circumstances. Always seek advice from an independent financial advisor before making any trade or investment.",Ae=a(385),Fe=a(197),Pe=(a(270),function(e){var t=e.show,a=e.handleClose;return Object(h.jsx)("div",{className:"Consent",children:Object(h.jsxs)(Ae.a,{show:t,backdrop:"static",keyboard:!1,size:"lg",children:[Object(h.jsx)(Ae.a.Header,{children:Object(h.jsx)(Ae.a.Title,{children:"Terms of use"})}),Object(h.jsx)(Ae.a.Body,{children:Ie}),Object(h.jsx)(Ae.a.Footer,{children:Object(h.jsx)(Fe.a,{variant:"primary",onClick:a,children:"I understand"})})]})})});ne.f.register(ne.e,ne.n,ne.l,ne.c,ne.s,ne.t,ne.k,ne.i,ne.r,ne.h,ne.a);var Me={strategies:[]},Ee={errors:[]};function Re(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ee,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"addError":var a=new Set(e.errors);return a.add(t.payload),{errors:Object(f.a)(Array.from(a))};case"cleanErrors":return{errors:[]};default:throw new Error}}function He(){var e=arguments.length>1?arguments[1]:void 0;if("setStrategies"===e.type)return{strategies:Object(f.a)(e.payload)};throw new Error}var Le=Object(c.createContext)({accountsState:fe,accountsDispatch:function(e){}}),Ye=Object(c.createContext)({strategiesState:Me,strategiesDispatch:function(e){}}),Ge=Object(c.createContext)({errorsState:Ee,errorsDispatch:function(e){}}),Ue=Object(c.createContext)({botsState:_,botsDispatch:function(e){}}),ze=Object(c.createContext)({gridBotsState:le,gridBotsDispatch:function(e){}}),Ve=Object(c.createContext)({smartTradesState:be,smartTradesDispatch:function(e){}}),$e=Object(c.createContext)({dealsState:S,dealsDispatch:function(e){}});var qe=function(){var e=Object(c.useReducer)(C,_,g),t=Object(j.a)(e,2),a=t[0],r=t[1],n=Object(c.useReducer)(ue,le,oe),s=Object(j.a)(n,2),i=s[0],o=s[1],u=Object(c.useReducer)(pe,fe),f=Object(j.a)(u,2),p=f[0],m=f[1],v=Object(c.useReducer)(He,Me),x=Object(j.a)(v,2),y=x[0],w=x[1],N=Object(c.useReducer)(Re,Ee),T=Object(j.a)(N,2),k=T[0],D=T[1],I=Object(c.useReducer)(je,be,de),A=Object(j.a)(I,2),F=A[0],P=A[1],M=Object(c.useReducer)(B,S),E=Object(j.a)(M,2),R=E[0],H=E[1],L=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,te();case 3:t=e.sent,w({type:"setStrategies",payload:t}),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),w({type:"setStrategies",payload:[]}),D({type:"addError",payload:"Error when fetching strategies list"});case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),Y=Object(c.useState)(!1),G=Object(j.a)(Y,2),U=G[0],z=G[1],V=Object(c.useState)({text:"empty"}),$=Object(j.a)(V,2),q=$[0],W=$[1];Object(c.useEffect)((function(){ce("consent").then((function(e){W(JSON.parse(e.data.replaceAll("=>",":")))})).catch((function(){z(!0)})),function(e,t,a,c){_e.apply(this,arguments)}(m,p,D),L()}),[]),Object(c.useEffect)((function(){"empty"!==q.text&&q.text!==Ie&&z(!0)}),[q]);var K=function(){var e=Object(b.a)(d.a.mark((function e(){var t;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re("consent",{text:Ie,date:(new Date).toString()});case 2:t=e.sent,console.log(t),t.error||z(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),J=p.list;return Object(h.jsx)(Ge.Provider,{value:{errorsState:k,errorsDispatch:D},children:Object(h.jsx)(Ye.Provider,{value:{strategiesState:y,strategiesDispatch:w},children:Object(h.jsx)(Le.Provider,{value:{accountsState:p,accountsDispatch:m},children:Object(h.jsx)(Ue.Provider,{value:{botsState:a,botsDispatch:r},children:Object(h.jsx)(Ve.Provider,{value:{smartTradesState:F,smartTradesDispatch:P},children:Object(h.jsx)(ze.Provider,{value:{gridBotsState:i,gridBotsDispatch:o},children:Object(h.jsxs)($e.Provider,{value:{dealsState:R,dealsDispatch:H},children:[Object(h.jsx)(Pe,{show:U,handleClose:K}),Object(h.jsxs)("div",{className:"App",children:[Object(h.jsx)(ie,{}),J.length>0?Object(h.jsx)(l.a,{}):Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(De.a,{animation:"grow"})}),Object(h.jsx)(O,{})]})]})})})})})})})},We=a(7),Ke=a.n(We),Je=a(378),Ze=a(379),Qe=a(377),Xe=a(380),et=a(387),tt=function(e){var t=Object(c.useRef)();return Object(c.useEffect)((function(){t.current=e})),t.current},at=function(e){var t="YYYY-MM-DD",a=e.label;return"today"===a?Ke()().subtract(1,"day").format(t):"week"===a?Ke()().subtract(1,"week").format(t):"month"===a?Ke()().subtract(1,"months").format(t):"custom"===a?e.from?Ke()(e.from).format(t):Ke()().format(t):""},ct=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c){var r,n,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.includes("USD")){e.next=4;break}return e.abrupt("return",Promise.resolve(c));case 4:return e.next=6,H("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USDT_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 6:if(!(r=e.sent)){e.next=9;break}return e.abrupt("return",r*c);case 9:return e.next=11,H("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=USD_").concat(a)).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 11:if(!(n=e.sent)){e.next=14;break}return e.abrupt("return",n*c);case 14:return e.next=16,H("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=").concat(a,"_USD")).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 16:if(!(s=e.sent)){e.next=19;break}return e.abrupt("return",c/s);case 19:return e.next=21,H("GET","/public/api/ver1/accounts/currency_rates?market_code=".concat(t,"&pair=").concat(a,"_USDT")).then((function(e){return e.json()})).then((function(e){return parseFloat(e.last)}));case 21:if(!(i=e.sent)){e.next=24;break}return e.abrupt("return",c/i);case 24:return e.abrupt("return",NaN);case 25:case"end":return e.stop()}}),e)})));return function(t,a,c){return e.apply(this,arguments)}}();function rt(e,t){return nt.apply(this,arguments)}function nt(){return(nt=Object(b.a)(d.a.mark((function e(t,a){var c,r,n,s,i,o,l,u,b,j,f,p,h;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&a&&a.id){e.next=2;break}return e.abrupt("return",0);case 2:if(c=parseInt(t.max_active_deals),r=parseFloat(t.base_order_volume),n=parseInt(t.max_safety_orders),s=parseFloat(t.safety_order_volume),i=parseFloat(t.leverage_custom_value),o=parseFloat(t.martingale_volume_coefficient),l=t.pairs[0].split("_")[0],u=t.pairs[0].split("_")[1],"quote_currency"!==t.base_order_volume_type){e.next=18;break}return e.next=13,st(a.market_code,l,r,s);case 13:b=e.sent,r=b.baseOrderVolume,s=b.safetyOrderVolume,e.next=32;break;case 18:if("base_currency"!==t.base_order_volume_type){e.next=26;break}return e.next=21,st(a.market_code,u,r,s);case 21:j=e.sent,r=j.baseOrderVolume,s=j.safetyOrderVolume,e.next=32;break;case 26:if("percent"!==t.base_order_volume_type){e.next=32;break}return e.next=29,it(t.account_id,l,u,a.market_code,t.strategy,r,s);case 29:f=e.sent,r=f.baseOrderVolume,s=f.safetyOrderVolume;case 32:return i&&(r/=i,s/=i),p=0,1!==o&&n>1?(h=s*(1-Math.pow(o,n))/(1-o),p=(h+r)*c):p=(n*s+r)*c,e.abrupt("return",p);case 36:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var st=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c,r){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ct(t,a,c);case 2:return e.t0=e.sent,e.next=5,ct(t,a,r);case 5:return e.t1=e.sent,e.abrupt("return",{baseOrderVolume:e.t0,safetyOrderVolume:e.t1});case 7:case"end":return e.stop()}}),e)})));return function(t,a,c,r){return e.apply(this,arguments)}}(),it=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c,r,n,s,i){var o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=ot(r)&&"short"===n?c:a,e.next=3,H("POST","/public/api/ver1/accounts/".concat(t,"/account_table_data")).then((function(e){return e.json()}));case 3:return l=e.sent,u=l.find((function(e){return e.currency_code===o})),b=0,u&&(b=(parseFloat(u.equity)-parseFloat(u.on_orders))*parseFloat(u.current_price_usd)),e.abrupt("return",{baseOrderVolume:s*b/100,safetyOrderVolume:i*b/100});case 8:case"end":return e.stop()}}),e)})));return function(t,a,c,r,n,s,i){return e.apply(this,arguments)}}(),ot=function(e){return-1===["binance_futures","binance_futures_coin","bybit_usdt_perpetual","bybit","ftx_futures","bitmex"].indexOf(e)};function lt(e){var t=parseFloat(e.leverage_custom_value);return t?e.fundsLocked/t:e.fundsLocked}var ut=function(e,t){var a=e.pairs[0].split("_")[0],c=e.pairs[0].split("_")[1],r=a,n="";return"percent"===e.safety_order_volume_type?(r="%",n="short"===e.strategy&&ot(t.market_code)?c:""):r="quote_currency"===e.safety_order_volume_type?a:c,{value:parseFloat(e.safety_order_volume),currency:r,additionalCurrency:n}},dt=function(e){var t=e.value,a=e.currency,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"auto";return a.includes("BTC")?new Intl.NumberFormat("en-US",{maximumFractionDigits:6,signDisplay:c}).format(t):"marketPrice"===a?new Intl.NumberFormat("en-US",{maximumFractionDigits:8,signDisplay:c}).format(t):new Intl.NumberFormat("en-US",{maximumFractionDigits:2,signDisplay:c}).format(t)};function bt(){return(bt=Object(b.a)(d.a.mark((function e(t,a){var c,r,n,s,i;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],n=c,s=0,!t.maxUsage){e.next=8;break}s=t.maxUsage,e.next=11;break;case 8:return e.next=10,rt(t,a);case 10:s=e.sent;case 11:return n="short"===t.strategy&&ot(a.market_code)?r:c,e.next=14,ct(a.market_code,n,1);case 14:return i=e.sent,e.abrupt("return",{value:s/i,currency:n});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function jt(e,t){return 0===e?0:t.reduce((function(e,t){return{usd_final_profit:parseFloat(e.usd_final_profit)+parseFloat(t.usd_final_profit)}}),{usd_final_profit:0}).usd_final_profit/e}var ft=a(27),pt=(a(271),{spot:"S",margin:"M",futures:"F"}),ht=function(e){var t=e.account,a=e.accountPieChart;return Object(h.jsxs)("div",{className:"AccountPieChart",children:[Object(h.jsx)("div",{className:"AccountTypeIconContainer",children:pt[t.supported_market_types[0]]}),"market_icon"in t&&Object(h.jsx)("div",{className:"AccountIconContainer",children:Object(h.jsx)("div",{className:"AccountIcon",style:{backgroundImage:"url(".concat(t.market_icon,")")}})}),t&&a.length>0?Object(h.jsx)("div",{className:"AccountPieChartContainer",children:Object(h.jsx)(Ot,{accountPieChart:a})}):Object(h.jsx)("div",{className:"AccountPieChartContainerEmpty"})]})},Ot=function(e){var t=e.accountPieChart;return Object(h.jsx)(ft.d,{data:{labels:t.map((function(e){return e.code})),datasets:[{data:t.map((function(e){return e.y})),backgroundColor:t.map((function(e){return e.code.includes("USD")&&e.code.length<6?"#00a59a":function(e){for(var t=0,a=0;a<e.length;a++)t=e.charCodeAt(a)+((t<<5)-t);var c="#";for(a=0;a<3;a++)c+=("00"+(t>>8*a&255).toString(16)).substr(-2);return c}(e.code)})),borderWidth:0}]},options:{plugins:{legend:{display:!1},tooltip:{callbacks:{label:function(e){var t=e.dataset.data[e.dataIndex];return"".concat(e.label," ").concat(t,"%")}},bodyFont:{size:10}}}}})},mt=function(e){var t=e.account;return Object(h.jsxs)("div",{className:"AccountInfoContainer",children:[Object(h.jsxs)("div",{className:"AccountInfoRecordContainer",children:[Object(h.jsx)("div",{className:"AccountInfoLabel",children:"Created:"}),Object(h.jsx)("div",{className:"AccountInfoValue",children:"".concat(Ke()(t.created_at).format("DD/MM/YYYY"))})]}),Object(h.jsxs)("div",{className:"AccountInfoRecordContainer",children:[Object(h.jsx)("div",{className:"AccountInfoLabel",children:"Updated:"}),Object(h.jsx)("div",{className:"AccountInfoValue",children:"".concat(Ke()(t.updated_at).format("DD/MM/YYYY"))})]}),Object(h.jsxs)("div",{className:"AccountInfoRecordContainer",children:[Object(h.jsx)("div",{className:"AccountInfoLabel",children:"API status:"}),Object(h.jsx)("div",{className:"AccountInfoValue",children:"".concat(t.api_key_invalid?"Invalid":"OK")})]})]})},vt=function(e){var t=e.accountId,a=Object(c.useContext)(Le),r=a.accountsState,n=a.accountsDispatch,s=r.accounts,i=r.accountPieChartData,o=r.accountActiveTradingEntities,u=Object(c.useContext)(Ge).errorsDispatch,d=Object(c.useState)(null),b=Object(j.a)(d,2),f=b[0],p=b[1],O=Object(c.useState)(null),m=Object(j.a)(O,2),v=m[0],x=m[1],y=Object(c.useState)(null),g=Object(j.a)(y,2),_=g[0],C=g[1],S=Object(l.g)();return Object(c.useEffect)((function(){Ne(n,r,u,t),function(e,t,a,c){ke.apply(this,arguments)}(n,r,u,t),p(s[t])}),[t]),Object(c.useEffect)((function(){t in i&&x(i[t])}),[i]),Object(c.useEffect)((function(){t in o&&C(o[t])}),[o]),Object(h.jsxs)("div",{className:"AccountPreview",children:[Object(h.jsxs)("div",{className:"AccountPreviewColumn",children:[f&&v&&Object(h.jsx)(ht,{account:f,accountPieChart:v}),f&&Object(h.jsx)(mt,{account:f})]}),Object(h.jsxs)("div",{className:"AccountPreviewColumn",style:{flexGrow:1,marginLeft:"16px"},children:[f&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"AccountNameContainer",children:Object(h.jsx)("span",{className:"AccountName",children:f.name})}),Object(h.jsx)("div",{className:"AccountPreviewTable",children:Object(h.jsxs)(Qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Balance value"}),Object(h.jsx)("th",{children:"24 hr change"})]})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"".concat(dt({value:parseFloat(f.usd_amount),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(f.day_profit_usd)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(f.day_profit_usd),currency:"USD"})," $")})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"".concat(dt({value:parseFloat(f.btc_amount),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(f.day_profit_btc)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(f.day_profit_btc),currency:"BTC"})," BTC")})]})]})]})})]}),_&&_.data&&Object(h.jsx)("div",{className:"AccountPreviewTable",style:{marginTop:"16px"},children:Object(h.jsxs)(Qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"DCA bots"}),Object(h.jsx)("th",{children:"Deals"}),Object(h.jsx)("th",{children:"Smart Trades"}),Object(h.jsx)("th",{children:"Grid Bots"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:_.data.active_bots_count}),Object(h.jsx)("td",{children:_.data.active_deals_count}),Object(h.jsx)("td",{children:_.data.active_smart_trades_count}),Object(h.jsx)("td",{children:_.data.active_grid_bots_count})]})})]})}),Object(h.jsx)("div",{className:"AccountPreviewButtonContainer",children:Object(h.jsx)(Fe.a,{className:"AccountPreviewButton",onClick:function(){S({pathname:"/accounts/".concat(t),search:window.location.search})},children:"View"})})]})]})},xt=(a(272),a(82)),yt=a.n(xt),gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(v.a)({},t&&{label:t})}}}},_t=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(v.a)({},t&&{label:t})}}}},Ct=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return{lineTension:.5,scales:{x:{type:"time",time:{unit:"week",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"},gridLines:{offsetGridLines:!0}},y:{beginAtZero:!0}},responsive:!0,maintainAspectRatio:!1,plugins:{filler:{propagate:!0,drawTime:"beforeDatasetDraw"},legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x",callbacks:Object(v.a)({},t&&{label:t})}}}},St=function(e,t){return{indexAxis:"y",scales:{x:{autoSkip:!1,stacked:!1,beginAtZero:!0},y:{stacked:!0,beginAtZero:!0,ticks:{autoSkip:!1,callback:function(e){return t[e].length>35?t[e].slice(0,33)+"...":t[e]}}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"y"}}}},Bt=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{scales:{x:{type:"time",time:{unit:t?"week":"month",tooltipFormat:"dddd, D MMM, YYYY"},ticks:{source:"auto"}},y:{beginAtZero:!0,ticks:{stepSize:1}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:e},tooltip:{intersect:!1,mode:"x"}}}},wt=function(e){var t=e.accountTable,a=e.accountId,r=Object(c.useState)(null),n=Object(j.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)(""),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(c.useState)(!1),f=Object(j.a)(b,2),p=f[0],O=f[1],m=Object(c.useState)("usd"),v=Object(j.a)(m,2),x=v[0],g=v[1];return Object(c.useEffect)((function(){!t||u||p?t&&i(y.a.orderBy(t.filter((function(e){return e.currency_code&&e.currency_code.includes(u.toUpperCase())})).filter((function(e){return!p||e.usd_value>10&&e.percentage>1})),["percentage"],["desc"])):i(y.a.orderBy(t,["percentage"],["desc"]))}),[t,u,p]),Object(h.jsxs)("div",{className:"AccountDetailsTableContainer",children:[Object(h.jsxs)("div",{className:"AccountDetailsTableFilters",children:[Object(h.jsx)(Xe.a,{onChange:function(e){d(e.target.value)},value:u,type:"text",style:{width:"200px",marginRight:"16px"}}),Object(h.jsx)(et.a,{type:"switch",onChange:function(e){O(e.target.checked)},value:p,id:"default-f",label:"Hide small balances"}),Object(h.jsxs)(Je.a,{style:{marginLeft:"auto"},children:[Object(h.jsx)(Ze.a,{id:"radio-account-balances-currency-usd",type:"radio",variant:"outline-primary",name:"radioAccountBalancesCurrencyMode",value:"usd",checked:"usd"===x,onChange:function(e){g(e.currentTarget.value)},children:"USD"},"usd"),Object(h.jsx)(Ze.a,{id:"radio-account-balances-currency-btc",type:"radio",variant:"outline-primary",name:"radioAccountBalancesCurrencyMode",value:"btc",checked:"btc"===x,onChange:function(e){g(e.currentTarget.value)},children:"BTC"},"btc")]})]}),Object(h.jsx)("div",{className:"AccountDetailsTable",children:s&&Object(h.jsxs)(Qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Token"}),Object(h.jsx)("th",{children:"Share"}),Object(h.jsx)("th",{children:"Price"}),Object(h.jsx)("th",{children:"Price change, 24h"}),Object(h.jsx)("th",{children:"Amount"}),"summary"!==a&&Object(h.jsx)("th",{children:"On orders"}),Object(h.jsx)("th",{children:"Total"})]})}),Object(h.jsx)("tbody",{children:s.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.currency_name?"".concat(e.currency_name," (").concat(e.currency_code,")"):e.currency_code}),Object(h.jsx)("td",{children:"".concat(dt({value:e.percentage,currency:"USD"})," %")}),Object(h.jsx)("td",{children:"usd"===x?"".concat(dt({value:e.current_price_usd,currency:"USD"})," $"):"".concat(dt({value:e.current_price,currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat("usd"===x?e.day_change_percent_usd:e.day_change_percent_btc)>=0?"showGreen":"showRed",children:"".concat(dt({value:"usd"===x?e.day_change_percent_usd:e.day_change_percent_btc,currency:"USD"})," %")}),Object(h.jsx)("td",{children:"".concat(dt({value:e.position,currency:e.currency_code}))}),"summary"!==a&&Object(h.jsx)("td",{children:"".concat(dt({value:e.on_orders,currency:e.currency_code}))}),Object(h.jsx)("td",{children:"usd"===x?"".concat(dt({value:e.usd_value,currency:"USD"})," $"):"".concat(dt({value:e.btc_value,currency:"BTC"})," BTC")})]},e.currency_code)}))})]})})]})},Nt=function(){var e,t=Object(c.useContext)(Le),a=t.accountsState,r=t.accountsDispatch,n=a.accounts,s=a.accountPieChartData,i=a.accountTableData,o=Object(c.useContext)(Ge).errorsDispatch,u=Object(c.useState)(null),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(c.useState)(null),O=Object(j.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)(null),y=Object(j.a)(x,2),g=y[0],_=y[1],C=Object(c.useState)(null),S=Object(j.a)(C,2),B=S[0],w=S[1],N=Object(c.useState)(null),T=Object(j.a)(N,2),k=T[0],D=T[1],I=Object(c.useState)("current"),A=Object(j.a)(I,2),F=A[0],P=A[1],M=Object(c.useState)("usd"),E=Object(j.a)(M,2),R=E[0],H=E[1],L=Object(c.useState)(Ke()().subtract(1,"months").toDate()),Y=Object(j.a)(L,2),G=Y[0],U=Y[1],z=Object(l.h)(),V=Object(l.g)();return Object(c.useEffect)((function(){z.accountId&&f("summary"===z.accountId?z.accountId:parseInt(z.accountId))}),[z]),Object(c.useEffect)((function(){b&&(Ne(r,a,o,b),Be(r,a,o,b),Ce(r,a,o,b))}),[b]),Object(c.useEffect)((function(){s&&b in s&&_(s[b])}),[s,b]),Object(c.useEffect)((function(){i&&b in i&&w(i[b])}),[i,b]),Object(c.useEffect)((function(){n&&b in n&&v(n[b])}),[n,b]),Object(c.useEffect)((function(){b&&G&&X(b,Ke()(G).format("DD-MM-YYYY")).then((function(e){D(e)}))}),[G,b]),Object(h.jsxs)("div",{className:"AccountDetails",children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Fe.a,{variant:"primary",size:"sm",className:"AccountDetailsBackButton",onClick:function(){V(-1)},children:"< Back"}),Object(h.jsx)(Fe.a,{style:{marginLeft:"16px"},className:"AccountDetailsBackButton",variant:"primary",size:"sm",onClick:function(){window.open("https://3commas.io/accounts/".concat(b),"_blank")},children:"Open in 3commas"})]}),Object(h.jsxs)("div",{className:"AccountDetailsMode",children:[Object(h.jsx)("div",{className:"AccountDetailsControl",children:Object(h.jsxs)(Je.a,{id:"foo",children:[Object(h.jsx)(Ze.a,{id:"radio-account-current",type:"radio",variant:"outline-primary",name:"radioAccountMode",value:"current",checked:"current"===F,onChange:function(e){P(e.currentTarget.value)},children:"Current"},"current"),Object(h.jsx)(Ze.a,{id:"radio-account-history",type:"radio",variant:"outline-primary",name:"radioAccountMode",value:"history",checked:"history"===F,onChange:function(e){P(e.currentTarget.value)},children:"History"},"history")]})}),"history"===F&&Object(h.jsx)("div",{className:"AccountDetailsControl",children:Object(h.jsxs)(Je.a,{id:"foo",children:[Object(h.jsx)(Ze.a,{id:"radio-account-currency-usd",type:"radio",variant:"outline-primary",name:"radioAccountCurrencyMode",value:"usd",checked:"usd"===R,onChange:function(e){H(e.currentTarget.value)},children:"USD"},"usd"),Object(h.jsx)(Ze.a,{id:"radio-account-currency-btc",type:"radio",variant:"outline-primary",name:"radioAccountCurrencyMode",value:"btc",checked:"btc"===R,onChange:function(e){H(e.currentTarget.value)},children:"BTC"},"btc")]})}),"history"===F&&Object(h.jsxs)("div",{className:"AccountDetailsNamedControl",children:[Object(h.jsx)("div",{className:"AccountDetailsFilterTitle",children:"From:"}),Object(h.jsx)(yt.a,{dateFormat:"dd/MM/yyyy",selected:G,onChange:function(e){U(e)},selectsStart:!0,className:"AccountDetailsDateFilter",strictParsing:!0})]})]}),Object(h.jsxs)("div",{className:"AccountDetailsOverview",children:["current"===F&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"AccountDetailsOverviewPieChart",children:m&&g&&Object(h.jsx)(Ot,{accountPieChart:g})}),m&&Object(h.jsxs)("div",{className:"AccountDetailsOverviewTable",children:[Object(h.jsxs)("div",{className:"AccountNameContainer",children:["market_icon"in m&&Object(h.jsx)("div",{className:"AccountDetailsAccountIcon",style:{backgroundImage:"url(".concat(m.market_icon,")")}}),Object(h.jsx)("span",{className:"AccountName",children:m.name})]}),Object(h.jsxs)(Qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Balance value"}),Object(h.jsx)("th",{children:"24 hr change"}),Object(h.jsx)("th",{children:"30 days change"}),Object(h.jsx)("th",{children:"30 days change, %"}),Object(h.jsx)("th",{children:"All time change"})]})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(dt({value:parseFloat(m.usd_amount),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(m.day_profit_usd)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.day_profit_usd),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(m.usd_profit)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.usd_profit),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(m.usd_profit_percentage)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.usd_profit_percentage),currency:"USD"})," %")}),Object(h.jsx)("td",{className:parseFloat(m.total_usd_profit)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.total_usd_profit),currency:"USD"})," $")})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(dt({value:parseFloat(m.btc_amount),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(m.day_profit_btc)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.day_profit_btc),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(m.btc_profit)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.btc_profit),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(m.btc_profit_percentage)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.btc_profit_percentage),currency:"USD"})," %")}),Object(h.jsx)("td",{className:parseFloat(m.total_btc_profit)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(m.total_btc_profit),currency:"BTC"})," BTC")})]})]})]})]})]}),"history"===F&&k&&Object(h.jsxs)("div",{className:"AccountDetailsOverviewBalances",children:[m&&Object(h.jsxs)("div",{className:"AccountNameContainer",children:["market_icon"in m&&Object(h.jsx)("div",{className:"AccountDetailsAccountIcon",style:{backgroundImage:"url(".concat(m.market_icon,")")}}),Object(h.jsx)("span",{className:"AccountName",children:m.name})]}),Object(h.jsx)("div",{className:"AccountDetailsOverviewBalancesChart",children:Object(h.jsx)(ft.c,{options:Ct("",(e="usd"===R?"USD":"BTC",function(t){return"".concat(t.dataset.label,": ").concat(dt({value:t.parsed.y,currency:e}))})),data:{labels:k.map((function(e){return Ke.a.unix(e.date).toDate()})),datasets:[{label:"usd"===R?"USD":"BTC",data:k.map((function(e){return"usd"===R?e.usd:e.btc})),borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]}),B&&Object(h.jsx)(wt,{accountTable:B,accountId:b})]})},Tt=(a(313),a(314),function(){var e=Object(c.useContext)(Le).accountsState.list;return Object(h.jsx)("div",{className:"AccountsList",children:e.map((function(e){return Object(h.jsx)(vt,{accountId:e},e)}))})}),kt=(a(315),function(){var e=Object(c.useContext)(Le),t=e.accountsState,a=e.accountsDispatch,r=t.accounts,n=t.accountPieChartData,s=t.accountTableData,i=Object(c.useContext)(Ge).errorsDispatch,o=Object(c.useState)(null),u=Object(j.a)(o,2),d=u[0],b=u[1],f=Object(c.useState)(null),p=Object(j.a)(f,2),O=p[0],m=p[1],v=Object(c.useState)(null),x=Object(j.a)(v,2),g=x[0],_=x[1],C=Object(l.g)();return Object(c.useEffect)((function(){Ne(a,t,i,"summary"),Be(a,t,i,"summary"),Ce(a,t,i,"summary")}),[]),Object(c.useEffect)((function(){"summary"in n&&m(n.summary)}),[n]),Object(c.useEffect)((function(){"summary"in s&&_(y.a.orderBy(s.summary,["percentage"],["desc"]).slice(0,3))}),[s]),Object(c.useEffect)((function(){"summary"in r&&b(r.summary)}),[r]),Object(h.jsxs)("div",{className:"AccountsSummaryPreview",children:[Object(h.jsxs)("div",{className:"AccountsSummaryPreviewColumn",children:[Object(h.jsx)("div",{className:"AccountNameContainer",children:Object(h.jsx)("span",{className:"AccountName",children:"Agrregate / Summary account"})}),Object(h.jsxs)("div",{className:"AccountsSummaryPreviewCharts",children:[Object(h.jsx)("div",{className:"AccountsSummaryPreviewPieChart",children:d&&O&&Object(h.jsx)(Ot,{accountPieChart:O})}),d&&Object(h.jsx)("div",{className:"AccountsSummaryPreviewBalanceTable",children:Object(h.jsxs)(Qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Balance value"}),Object(h.jsx)("th",{children:"24 hr change"})]})}),Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(dt({value:parseFloat(d.usd_amount),currency:"USD"})," $")}),Object(h.jsx)("td",{className:parseFloat(d.day_profit_usd)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(d.day_profit_usd),currency:"USD"})," $")})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:"".concat(dt({value:parseFloat(d.btc_amount),currency:"BTC"})," BTC")}),Object(h.jsx)("td",{className:parseFloat(d.day_profit_btc)>=0?"showGreen":"showRed",children:"".concat(dt({value:parseFloat(d.day_profit_btc),currency:"BTC"})," BTC")})]})]})]})})]})]}),Object(h.jsxs)("div",{className:"AccountsSummaryPreviewColumn",children:[Object(h.jsx)("div",{className:"AccountNameContainer",children:Object(h.jsx)("span",{className:"AccountName",children:"Top assets"})}),g&&Object(h.jsx)("div",{className:"AccountsSummaryPreviewAssetsTable",children:Object(h.jsxs)(Qe.a,{size:"sm",style:{fontSize:"12px"},children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Token"}),Object(h.jsx)("th",{children:"Amount"}),Object(h.jsx)("th",{children:"Total value, $"})]})}),Object(h.jsx)("tbody",{children:g.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:e.currency_code}),Object(h.jsx)("td",{children:"".concat(dt({value:e.position,currency:e.currency_code}))}),Object(h.jsx)("td",{children:"".concat(dt({value:e.usd_value,currency:"USD"})," $")})]},e.currency_code)}))})]})})]}),Object(h.jsx)("div",{className:"AccountsSummaryButtonContainer",children:Object(h.jsx)(Fe.a,{className:"AccountPreviewButton",onClick:function(){C({pathname:"/accounts/summary",search:window.location.search})},children:"View"})})]})}),Dt=function(){return Object(h.jsxs)("div",{className:"Accounts",children:[Object(h.jsx)(kt,{}),Object(h.jsx)(Tt,{})]})},It=a(384),At=a(46),Ft=function(e,t){return Math.ceil(e.diff(t)/36e5)},Pt=function(e,t){return Math.ceil(e.diff(t)/864e5)},Mt=function(e){return Ft(Ke()(),Ke()(e.closed_at))},Et=function(){var e=Object(b.a)(d.a.mark((function e(t){var a,c,r,n,s,i,o,l=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=l.length>1&&void 0!==l[1]?l[1]:30,c=l.length>2&&void 0!==l[2]?l[2]:function(e){},r=24*a,n=1e3,s=0,i=[],o=function(){var e=Object(b.a)(d.a.mark((function e(){var a,l,u,b,p;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee(t,s,n,"finished","closed_at");case 2:if(0!==(a=e.sent).length){e.next=5;break}return e.abrupt("return");case 5:if(l=a.slice(-1),u=Object(j.a)(l,1),b=u[0],!(a.length===n&&Mt(b)<=r)){e.next=14;break}return s+=n,i=[].concat(Object(f.a)(i),Object(f.a)(a)),c(s),e.next=12,o();case 12:e.next=16;break;case 14:p=a.filter((function(e){return Mt(e)<=r})),i=[].concat(Object(f.a)(i),Object(f.a)(p));case 16:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=9,o();case 9:return e.abrupt("return",i);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rt=function(e){var t=y.a.groupBy(e,(function(e){return Ke()(e.closed_at).format("YYYY-MM-DD")}));return y.a.mapValues(t,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))},Ht=function(e){var t=y.a.groupBy(e,"pair");return y.a.mapValues(t,(function(e){return y.a.mean(e.map((function(e){return e.completed_safety_orders_count})))}))},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:30;return Object(f.a)(new Array(e)).map((function(e,t){return Ke()().startOf("day").subtract(t,"days")})).map((function(e){return e.format("YYYY-MM-DD")})).reverse()},Yt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Lt(t),c=a.map((function(t){return t in e?e[t]:0})),r=a.map((function(e){return Ke()(e,"YYYY-MM-DD")}));return[r,c]},Gt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30,a=Yt(e,t),c=0,r=a[1].map((function(e){var t=c+e;return c=t,t}));return[a[0],r]},Ut=function(e){var t=Rt(e),a=e.length>0?Pt(Ke()(),Ke()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Yt(t,a<30?30:a+1)},zt=function(e){var t=function(e){var t=y.a.groupBy(e,"pair");return y.a.mapValues(t,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))}))}(e),a=y()(t).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[a.map((function(e){return e[0].split("_").reverse().join("/")})),a.map((function(e){return e[1]}))]},Vt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",a=Ht(e),c=y()(a).toPairs().orderBy([1],[t]).value().slice(0,10),r=c.map((function(e){return e[0].split("_").reverse().join("/")})),n=c.map((function(e){return e[1]}));return[r,n]},$t=1e5,qt=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=30},Wt=function(e,t){return t in e.deals&&e.deals[t]&&e.deals[t].period>=$t},Kt=function(e,t){return qt(e,t)?e.deals[t].list.filter((function(e){return Mt(e)<=720})):[]},Jt=function(e,t){return Wt(e,t)?e.deals[t].list:[]},Zt=function(e){return e.filter((function(e){return"failed"!==e.status&&"cancelled"!==e.status}))},Qt=function(e){return{type:"setNewBotsList",payload:e}},Xt=function(e){return{type:"setHasMore",payload:e}},ea=function(e){return{type:"addToBotsList",payload:e}},ta=function(e){return{type:"setBotsOffset",payload:e}},aa=function(e,t){return{type:"setBot",payload:{botId:e,bot:t}}};function ca(e,t,a){return ra.apply(this,arguments)}function ra(){return ra=Object(b.a)(d.a.mark((function e(t,a,c){var r,n,s,i,o,l,u,b,j,f,p,h=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>3&&void 0!==h[3]&&h[3],n=h.length>4?h[4]:void 0,t(Xt(!0)),s=a.offset,i=a.limit,o=a.filters,l=o.sorting,u=o.scope,b=o.type,j=o.account,f=n||i,e.prev=5,e.next=8,L(s,f,l,u,b,j,r);case 8:p=e.sent,r?(t(ta(f)),t(Qt(p))):(t(ta(s+f)),t(ea(p))),p.length<f&&t(Xt(!1)),e.next=19;break;case 13:e.prev=13,e.t0=e.catch(5),t(Qt([])),t(ta(f)),t(Xt(!1)),c({type:"addError",payload:"Error when fetching bots list"});case 19:case"end":return e.stop()}}),e,null,[[5,13]])}))),ra.apply(this,arguments)}function na(){return(na=Object(b.a)(d.a.mark((function e(t,a,c,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z(r);case 3:n=e.sent,t(aa(r,n)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),c({type:"addError",payload:"Error when fetching bot ".concat(r)});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function sa(){return(sa=Object(b.a)(d.a.mark((function e(t,a,c,r,n){var s,i,o,l,u;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=a.bots,i=s[r],e.prev=2,"maxUsage"in s[r]){e.next=9;break}return e.next=6,rt(i,n);case 6:o=e.sent,l=Object(v.a)(Object(v.a)({},i),{},{maxUsage:o}),t(aa(i.id,l));case 9:e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),u=Object(v.a)(Object(v.a)({},i),{},{maxUsage:0}),t(aa(i.id,u)),c({type:"addError",payload:"Error when fetching max usage for bot ".concat(i.name)});case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function ia(){return(ia=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=a.bots,s=n[r],e.prev=2,"fundsLocked"in n[r]){e.next=12;break}return e.next=6,ae(r);case 6:i=e.sent,o=i.profits_in_usd,l=o.today_usd_profit,u=o.funds_locked_in_active_deals,b=Object(v.a)(Object(v.a)({},s),{},{fundsLocked:u,todayUsdProfit:l}),t(aa(s.id,b));case 12:e.next=19;break;case 14:e.prev=14,e.t0=e.catch(2),j=Object(v.a)(Object(v.a)({},s),{},{fundsLocked:0,todayUsdProfit:0}),t(aa(s.id,j)),c({type:"addError",payload:"Error when fetching stats for bot ".concat(s.name)});case 19:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function oa(){return(oa=Object(b.a)(d.a.mark((function e(t,a,c,r,n){var s,i,o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=a.bots,i=s[n];try{o=Kt(c,n),l=i.maxUsage,u=Object(v.a)(Object(v.a)({},i),{},{returns:jt(l,o)}),t(aa(i.id,u))}catch(d){b=Object(v.a)(Object(v.a)({},i),{},{returns:0}),t(aa(i.id,b)),r({type:"addError",payload:"Error when getting returns for bot ".concat(i.name)})}case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var la=function(e,t,a){return{type:"getDealsList",payload:{deals:e,botId:t,periodInDays:a}}},ua=function(e,t){return{type:"getActiveDealsList",payload:{activeDeals:e,botId:t}}},da=function(e,t){return{type:"setOffset",payload:{botId:e,offset:t}}},ba=function(e){return{type:"resetDeals",payload:{botId:e}}},ja=function(e){return{type:"resetActiveDeals",payload:{botId:e}}};function fa(e,t,a,c){return pa.apply(this,arguments)}function pa(){return(pa=Object(b.a)(d.a.mark((function e(t,a,c,r){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!qt(t,r)){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,Et(r,30);case 5:n=e.sent,a(la(n,r,30)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),e.t0.message.includes("This limiter has been stopped")||c({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}function ha(e,t,a,c){return Oa.apply(this,arguments)}function Oa(){return Oa=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=i.length>4&&void 0!==i[4]&&i[4],e.prev=1,!Wt(t,r)||n){e.next=4;break}return e.abrupt("return");case 4:return n&&a(ba(r)),e.next=7,fa(t,a,c,r);case 7:return e.next=9,Et(r,$t,(function(e){a(da(r,e))}));case 9:s=e.sent,a(la(s,r,$t)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||c({type:"addError",payload:"Error when fetching deals for bot ".concat(r)});case 16:case"end":return e.stop()}}),e,null,[[1,13]])}))),Oa.apply(this,arguments)}var ma=function(){var e=Object(b.a)(d.a.mark((function e(t,a,c){var r,n,s=arguments;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=s.length>3&&void 0!==s[3]&&s[3],e.prev=1,r&&t(ja(c)),e.next=5,ee(c,0,1e3,"active","created_at");case 5:n=e.sent,t(ua(n,c)),e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(1),e.t0.message.includes("This limiter has been stopped")||a({type:"addError",payload:"Error when fetching active deals for bot ".concat(c)}),e.abrupt("return",Promise.resolve([]));case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a,c){return e.apply(this,arguments)}}(),va=(a(316),a(317),function(e){var t,a,r,n=e.deals,s=(e.timeRangeValue,e.dateLabelsDays),i=Object(c.useState)([]),o=Object(j.a)(i,2),l=o[0],u=o[1],d=Object(c.useState)([[],[]]),b=Object(j.a)(d,2),f=b[0],p=b[1],O=Object(c.useState)([]),m=Object(j.a)(O,2),v=m[0],x=m[1],g=function(e){var t=y.a.countBy(e,(function(e){return e.localized_status})),a=["Cancelled","StopLoss","Failed","Completed","Closed at Market Price","Liquidated","Switched"],c=a.map((function(e){return t[e]}));return[a,c]}(n);return Object(c.useEffect)((function(){u(Zt(n))}),[n]),Object(c.useEffect)((function(){p(function(e,t){var a=y.a.groupBy(e,(function(e){return Ke()(e.closed_at).format("YYYY-MM-DD")})),c=y.a.mapValues(a,(function(e){return e.length}));return t.map((function(e){return e in c?c[e]:0}))}(l,s)),x(function(e){var t=e.map((function(e){var t=Ke()(e.created_at),a=e.closed_at?Ke()(e.closed_at):Ke()();return Ft(a,t)})),a=y.a.countBy(t),c=y.a.keys(a).map((function(e){return parseInt(e)})),r=c.map((function(e){return a[e]}));return[c,r]}(l))}),[l]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:Bt("Finished deals per day",s.length<70),data:{labels:s,datasets:[{label:"Finished deals",data:f,borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.b,{options:{aspectRatio:1.7,plugins:{title:{display:!0,text:"Finished deals by Status"},tooltip:{callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return t?e+t:e}),0),c=t.data[e.dataIndex],r=Math.floor(c/a*100+.5),n=e.label;return"".concat(n,": ").concat(c," (").concat(r,"%)")}}},legend:{labels:{filter:function(e,t){return t.datasets[0].data[e.index]}}}}},width:300,data:{labels:g[0],datasets:[{data:g[1],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(255, 206, 86, 0.2)","rgba(75, 192, 192, 0.2)","rgba(153, 102, 255, 0.2)","rgba(255, 159, 64, 0.2)","rgba(39, 47, 148, 0.2)"],borderColor:["rgba(54, 162, 235, 1)","rgba(255, 99, 132, 1)","rgba(255, 206, 86, 1)","rgba(75, 192, 192, 1)","rgba(153, 102, 255, 1)","rgba(255, 159, 64, 1)","rgba(39, 47, 148, 1)"],borderWidth:1}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:(t="Finished deals duration histogram, hours",a="Duration, hours",r="Number of deals",{barPercentage:1.25,scales:{x:{type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:r}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x",callbacks:{label:function(e){var t=e.dataset,a=t.data.reduce((function(e,t){return e+t})),c=t.data[e.dataIndex],r=Math.floor(c/a*100+.5);return" ".concat(c," deals (").concat(r,"%)")},title:function(e){var t=parseInt(e[0].label);return"Duration from ".concat(t-1," to ").concat(t," hours")}}}}}),data:{labels:v[0],datasets:[{label:"Finished deals",data:v[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),xa=(a(318),function(e){var t=e.deals,a=(e.timeRangeValue,e.dateLabelsDays,e.bot),r=Object(c.useState)([[],[]]),n=Object(j.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)([[],[]]),l=Object(j.a)(o,2),u=l[0],d=l[1],b=Object(c.useState)([[],[]]),f=Object(j.a)(b,2),p=f[0],O=f[1];return Object(c.useEffect)((function(){i(function(e){var t=Rt(e),a=e.length>0?Pt(Ke()(),Ke()(e.map((function(e){return e})).reverse()[0].closed_at)):0;return Gt(t,a<30?30:a+1)}(t)),d(Ut(t)),O(zt(t))}),[t]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.c,{options:_t("Accumulative Profit, $"),data:{labels:s[0],datasets:[{label:"Accumulative Profit, $",data:s[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:gt("Daily Profit, $"),data:{labels:u[0],datasets:[{label:"Profit, $",data:u[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),"Bot::SingleBot"!==a.type&&Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:St("Pairs leaderboard by profit",p[0]),data:{labels:p[0],datasets:[{label:"Profit, $",data:p[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),ya=(a(319),function(e){var t,a,r,n=e.deals,s=(e.timeRangeValue,e.dateLabelsDays,e.bot,Object(c.useState)([])),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)([]),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(c.useState)([[],[]]),O=Object(j.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)([[],[]]),g=Object(j.a)(x,2),_=g[0],C=g[1];return Object(c.useEffect)((function(){l(Zt(n))}),[n]),Object(c.useEffect)((function(){f(function(e){var t=e.map((function(e){return e.completed_safety_orders_count})),a=y.a.countBy(t),c=y.a.keys(a).map((function(e){return parseInt(e)})),r=c.map((function(e){return a[e]}));return[c,r]}(o)),v(Vt(o)),C(Vt(o,"asc"))}),[o]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:St("Pairs with least SO completed",_[0]),data:{labels:_[0],datasets:[{label:"Average completed safety orders",data:_[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:St("Pairs with most SO completed",m[0]),data:{labels:m[0],datasets:[{label:"Average completed safety orders",data:m[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:(t="Histogram of completed SO per deal",a="Number of completed safety orders",r="Number of deals",{barPercentage:1.25,scales:{x:{beginAtZero:!0,suggestedMin:0,type:"linear",ticks:{source:"auto",stepSize:1},title:{display:!0,text:a}},y:{beginAtZero:!0,ticks:{stepSize:1},title:{display:!0,text:r}}},responsive:!0,plugins:{legend:{display:!1},title:{display:!0,text:t},tooltip:{intersect:!1,mode:"x"}}}),data:{labels:b[0],datasets:[{label:"Finished deals",data:b[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),ga=(a(320),function(e){var t=e.bot,a=e.deals,r=e.account,n=e.infoKey,s=e.timeRangeValue,i=Object(c.useState)([]),o=Object(j.a)(i,2),l=o[0],u=o[1];return Object(c.useEffect)((function(){if(a)if("allTime"===s){var e=a.length>0?Math.ceil((t=a.slice(-1).pop(),Pt(Ke()(),Ke()(t.created_at)))):0;u(Lt(e>30?e:30))}else"30d"===s&&u(Lt(30));var t}),[a]),Object(h.jsx)(h.Fragment,{children:a&&l&&t&&r&&Object(h.jsxs)("div",{className:"DCABotDetailsCharts",children:["main"===n&&Object(h.jsx)(va,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"settings"===n&&Object(h.jsx)(va,{deals:a,timeRangeValue:s,dateLabelsDays:l}),"profits"===n&&Object(h.jsx)(xa,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t}),"safeties"===n&&Object(h.jsx)(ya,{deals:a,timeRangeValue:s,dateLabelsDays:l,bot:t})]})})}),_a=a(77),Ca=(a(322),a(381)),Sa=a(389),Ba={Cancelled:"secondary",StopLoss:"danger",Failed:"warning",Completed:"success","Closed at Market Price":"dark",Liquidated:"dark",Switched:"secondary"},wa=function(e){e.bot;var t=e.deals,a=e.dealStateSwitcher,c=r.a.useMemo((function(){return[{Header:"ID",accessor:"id",disableSortBy:!0},{Header:"Pair",accessor:function(e,t){return e.pair.split("_").reverse().join("/")},id:"pair",disableSortBy:!0},{Header:"Status",accessor:"localized_status",Cell:function(e){var t=e.cell.value;return Object(h.jsx)(Ca.a,{style:{fontSize:"12px"},bg:Ba[t],children:t})},disableSortBy:!0},{Header:"Start",accessor:function(e,t){return new Date(e.created_at)},id:"created_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Ke()(t).format("D MMM, YYYY")}),Object(h.jsx)("div",{children:Ke()(t).format("HH:mm")})]})}},{Header:"End",accessor:function(e,t){return new Date(e.closed_at)},id:"closed_at",sortType:"datetime",Cell:function(e){var t=e.cell.value;return"finished"===a?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:Ke()(t).format("D MMM, YYYY")}),Object(h.jsx)("div",{children:Ke()(t).format("HH:mm")})]}):Object(h.jsx)("div",{})}},{Header:"Duration",accessor:function(e,t){var a=Ke.a.utc(e.created_at);return(e.closed_at?Ke.a.utc(e.closed_at):Ke.a.utc()).diff(a)},id:"duration",Cell:function(e){var t=e.cell.value,a=Ke.a.duration(t),c=Math.floor(a.asDays()),r=c?"".concat(c,"d "):"",n=a.hours(),s="".concat(n,"h "),i=a.minutes(),o="".concat(i,"m");return"".concat(r," ").concat(s," ").concat(o)}},{Header:"Avg. entry price",id:"bought_average_price",accessor:function(e,t){return"long"===e.strategy?e.bought_average_price:e.sold_average_price},Cell:function(e){var t=e.cell.value;return t?dt({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"finished"===a?"Close price":"Current price",id:"sold_average_price",accessor:function(e,t){return"finished"===a?"long"===e.strategy?e.sold_average_price:e.bought_average_price:e.current_price},Cell:function(e){var t=e.cell.value;return t?dt({value:parseFloat(t),currency:"marketPrice"}):""},disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],c=e.pair.split("_")[1],r="long"===e.strategy?dt({value:e.bought_amount,currency:c}):dt({value:e.sold_amount,currency:c}),n="long"===e.strategy?dt({value:e.bought_volume,currency:a}):dt({value:e.sold_volume,currency:a});return"".concat(r," ").concat(c,"!").concat(n," ").concat(a)},id:"volume",Cell:function(e){var t=e.cell.value.split("!");return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:t[0]}),Object(h.jsx)("div",{children:t[1]})]})},disableSortBy:!0},{Header:"Filled SO",id:"completed_safety_orders_count",accessor:function(e,t){return"".concat(e.completed_safety_orders_count).concat(e.completed_manual_safety_orders_count?" (+".concat(e.completed_manual_safety_orders_count,")"):"")},disableSortBy:!0},{Header:"Profit, %",accessor:"finished"===a?"final_profit_percentage":"actual_profit_percentage",Cell:function(e){var t=e.cell.value;return"".concat(t,"%")},disableSortBy:!0},{Header:"Profit, $",accessor:"finished"===a?"usd_final_profit":"actual_usd_profit",sortType:function(e,t){return(e=Number("finished"===a?e.original.usd_final_profit:e.original.actual_usd_profit))>(t=Number("finished"===a?t.original.usd_final_profit:t.original.actual_usd_profit))?1:-1},Cell:function(e){var t=e.cell.value,a=parseFloat(t);return Object(h.jsx)(Ca.a,{style:{fontSize:"13px"},bg:a>=0?"success":"danger",children:"".concat(dt({value:a,currency:"USD"},"always")," $")})}},{Header:"Profit in Base",id:"profitBase",accessor:function(e,t){return"".concat(parseFloat(e.bought_amount)-parseFloat(e.sold_amount),"!").concat(e.pair.split("_")[1])},Cell:function(e){var t=e.cell.value,c=parseFloat(t.split("!")[0]),r=t.split("!")[1];return"finished"===a?Object(h.jsx)("span",{style:{color:c>=0?"green":"red"},children:"".concat(dt({value:c,currency:r},"always")," ").concat(r)}):""},disableSortBy:!0},{Header:"Profit in Quote",id:"profitQuote",accessor:function(e,t){return"".concat(parseFloat(e.sold_volume)-parseFloat(e.bought_volume),"!").concat(e.pair.split("_")[0])},Cell:function(e){var t=e.cell.value,c=parseFloat(t.split("!")[0]),r=t.split("!")[1];return"finished"===a?Object(h.jsx)("span",{style:{color:c>=0?"green":"red"},children:"".concat(dt({value:c,currency:r},"always")," ").concat(r)}):""},disableSortBy:!0}]}),[]),n=Object(_a.useTable)({columns:c,data:t,disableSortRemove:!0,autoResetPage:!0,autoResetSortBy:!1,initialState:{pageSize:50,sortBy:"finished"===a?[{id:"closed_at",desc:!0}]:[{id:"created_at",desc:!0}]}},_a.useSortBy,_a.usePagination),s=n.getTableProps,i=n.getTableBodyProps,o=n.headerGroups,l=n.prepareRow,u=n.page,d=n.pageCount,b=n.gotoPage,f=n.nextPage,p=n.previousPage,O=n.state.pageIndex,m=r.a.useState(!1),x=Object(j.a)(m,2),y=x[0],g=x[1],_=r.a.useState(null),C=Object(j.a)(_,2),S=C[0],B=C[1];return Object(h.jsx)("div",{className:"DCABotDetailsDealsTable",children:Object(h.jsxs)("div",{className:"DCABotDetailsDealsTableContainer",children:[Object(h.jsx)(Ta,{modalIsOpen:y,setModalIsOpen:g,dealId:S}),d>1&&Object(h.jsx)(Na,{pageIndex:O,pageCount:d,gotoPage:b,nextPage:f,previousPage:p}),Object(h.jsxs)(Qe.a,Object(v.a)(Object(v.a)({striped:!0,bordered:!0},s()),{},{hover:!0,children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:o.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps(e.getSortByToggleProps())),{},{children:Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},i()),{},{children:u.map((function(e,t){return l(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getRowProps()),{},{onClick:function(){B(e.original.id),g(!0)},style:{cursor:"pointer"},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))]})})},Na=function(e){var t=e.pageIndex,a=e.pageCount,c=e.gotoPage,r=e.nextPage,n=e.previousPage,s=function(e,t){return Array(t-e+1).fill(0).map((function(t,a){return e+a}))},i=function(e,t){return Object(h.jsx)(Sa.a.Item,{active:e===t,onClick:function(){c(e)},children:e+1},e)},o=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Sa.a.First,{onClick:function(){c(0)}}),Object(h.jsx)(Sa.a.Prev,{onClick:function(){n()}}),t-2<4&&i(t-2,t),t-1<4&&i(t-1,t)]})},l=function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Sa.a.Next,{onClick:function(){r()}}),Object(h.jsx)(Sa.a.Last,{onClick:function(){c(a-1)}})]})};return Object(h.jsxs)(h.Fragment,{children:[a<=16&&Object(h.jsx)(Sa.a,{children:s(0,a-1).map((function(e){return i(e,t)}))}),a>16&&Object(h.jsxs)(Sa.a,{children:[t<7&&Object(h.jsxs)(h.Fragment,{children:[s(0,6).map((function(e){return i(e,t)})),l()]}),t>=7&&t<=a-8&&Object(h.jsxs)(h.Fragment,{children:[o(),i(t-2,t),i(t-1,t),Object(h.jsx)(Sa.a.Item,{active:!0,children:t+1}),i(t+1,t),i(t+2,t),l()]}),a-t<8&&Object(h.jsxs)(h.Fragment,{children:[o(),s(a-7,a-1).map((function(e){return i(e,t)}))]})]})]})},Ta=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,n=e.dealId,s=r.a.useState(null),i=Object(j.a)(s,2),o=i[0],l=i[1];return Object(c.useEffect)((function(){n&&q(n).then((function(e){l(e)}))}),[n]),Object(h.jsx)(h.Fragment,{children:o&&Object(h.jsxs)(Ae.a,{show:t,onHide:function(){a(!1)},scrollable:!0,size:"lg",children:[Object(h.jsx)(Ae.a.Header,{closeButton:!0,children:Object(h.jsx)(Ae.a.Title,{children:o.id})}),Object(h.jsxs)(Ae.a.Body,{children:[o.bot_events.length>0&&Object(h.jsxs)(Qe.a,{striped:!0,hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Date/Time"}),Object(h.jsx)("th",{children:"Message"})]})}),Object(h.jsx)("tbody",{children:o.bot_events.map((function(e){return Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:Ke()(e.created_at).format("D MMM, YYYY HH:mm")}),Object(h.jsx)("td",{children:e.message})]},e.created_at)}))})]}),0===o.bot_events.length&&Object(h.jsxs)("blockquote",{className:"blockquote mb-0",children:[Object(h.jsxs)("p",{children:["\u201cNothing can last forever. There isn't any memory, no matter how intense, that doesn't fade out at last.\u201d"," "]}),Object(h.jsx)("footer",{className:"blockquote-footer",children:"Juan Rulfo"})]})]}),Object(h.jsx)(Ae.a.Footer,{children:Object(h.jsx)(Fe.a,{variant:"primary",onClick:function(){window.open("https://3commas.io/deals/".concat(n),"_blank")},children:"Open in 3commas"})})]})})},ka=a(383),Da=a(390),Ia=a(386),Aa=a(382),Fa=(a(323),a(324),function(e){var t=e.currency,a=e.size,c=void 0===a?15:a,r=t.length>5?t.replace("USDT","").replace("BUSD","").replace("-PERP","").replace("USD",""):t;return Object(h.jsx)("div",{className:"CurrencyIcon",style:{width:c,height:c,borderRadius:c,backgroundSize:c,backgroundImage:"url(https://3commas.io/currency/icon/".concat(r.toLowerCase(),".png)")}})}),Pa=a(388),Ma={nonstop:"Non-stop",qfl:"QFL",tv_custom_signal:"TV custom signal",trading_view:"TV",buy_or_strong_buy:"Buy",strong_buy:"Strong Buy",sell_or_strong_sell:"Sell",strong_sell:"Strong Sell",rsi:"RSI",manual:"Manual",ult:"ULT",ta_preset:"TA Preset",cqs_telegram:"CQS Scalping",krypto_boss_free:"HIRN Crypto Free"},Ea=function(e,t){if(t in Ma)return Ma[t];var a=e.strategies.find((function(e){return e.strategy_key===t}));return a?a.name:t},Ra=function(e){var t=e.botItem,a=e.account,r=Object(c.useContext)($e),n=r.dealsState,s=r.dealsDispatch,i=Object(c.useContext)(Ue),o=i.botsState,u=i.botsDispatch,f=Object(c.useContext)(Ge).errorsDispatch,p=Object(c.useContext)(Ye).strategiesState,O=Object(c.useState)(!1),m=Object(j.a)(O,2),v=m[0],x=m[1],y=Object(l.g)(),g=n.deals,_=Object(Pa.a)().t;Object(c.useEffect)((function(){(function(e,t,a,c){return ia.apply(this,arguments)})(u,o,f,t.id).then((function(){x(!0)}))}),[t]),Object(c.useEffect)((function(){v&&function(e,t,a,c,r){return sa.apply(this,arguments)}(u,o,f,t.id,a).then()}),[a,t,v]),Object(c.useEffect)((function(){t&&!("returns"in t)&&"maxUsage"in t&&qt(n,t.id)&&function(e,t,a,c,r){oa.apply(this,arguments)}(u,o,n,f,t.id)}),[g,t]);var C=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(Math.random()),fa(n,s,f,t.id);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=Pt(Ke()(),Ke()(t.created_at)),B=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),w=1===t.strategy_list.length?Ea(p,t.strategy_list[0].strategy):"Combined";return Object(h.jsx)("div",{className:"BotPreview",children:Object(h.jsxs)("div",{className:"BotPreviewRow",children:[Object(h.jsxs)("div",{className:"BotPreviewIconsSetContainer",children:[Object(h.jsx)(Ha,{bot:t}),Object(h.jsx)(Ya,{strategy:t.strategy,age:S,is_enabled:t.is_enabled}),Object(h.jsx)("div",{className:"BotReturns",children:Object(h.jsx)(Ga,{returns:t.returns,getReturns:C,maxUsage:t.maxUsage,botId:t.id})})]}),Object(h.jsxs)("div",{className:"BotPreviewTableContainer",children:[Object(h.jsx)(La,{name:t.name}),Object(h.jsx)(Qe.a,{striped:!0,size:"sm",style:{fontSize:"12px",marginBottom:"0"},children:Object(h.jsxs)("tbody",{children:[Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"BotID"}),Object(h.jsx)("td",{children:t.id})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold",width:"170px"},children:"Account"}),Object(h.jsx)("td",{children:Object(h.jsxs)("div",{style:{display:"flex"},children:["market_icon"in a&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(a.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),y({pathname:"/accounts/".concat(a.id),search:window.location.search})},href:"#",children:a.name})]})})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Strategy"}),Object(h.jsx)("td",{children:w})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Active deals/Max"}),Object(h.jsx)("td",{children:"".concat(t.active_deals_count,"/").concat(t.max_active_deals)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Today's profit/Loss"}),Object(h.jsx)("td",{children:B.format(t.todayUsdProfit)})]}),Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Total profit/Loss"}),Object(h.jsx)("td",{children:B.format(t.finished_deals_profit_usd)})]}),Object(h.jsx)("tr",{children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:_("dcaBotFundsUsedMaxUsage")}),children:Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Funds locked/Max usage"})}),Object(h.jsx)("td",{children:"".concat(B.format(lt(t)),"/").concat(B.format(t.maxUsage))})]})}),Object(h.jsx)("tr",{children:Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:_("dcaBotCurrentPnl")}),children:Object(h.jsx)("td",{style:{fontWeight:"bold"},children:"Current uPnL"})}),Object(h.jsx)("td",{children:B.format(t.active_deals_usd_profit)})]})})]})}),Object(h.jsx)("div",{className:"BotPreviewButtons",children:Object(h.jsx)(Fe.a,{variant:"primary",onClick:function(){y({pathname:"/".concat(t.id),search:window.location.search})},children:"View"})})]})]})})},Ha=function(e){var t=e.bot,a=t.pairs[0].split("_")[0],c=t.pairs[0].split("_")[1],r="Bot::MultiBot"===t.type;return Object(h.jsxs)("div",{className:"IconsSetContainer",children:[Object(h.jsx)("div",{className:"BotQuoteIconContainer",children:Object(h.jsx)(Fa,{currency:a,size:60})}),r?Object(h.jsx)("div",{className:"BotBaseIconContainer",children:Object(h.jsx)("img",{src:"/Multicoin_white.png",alt:"logo",className:"RobotsIcon"})}):Object(h.jsx)("div",{className:"BotBaseIconContainer",children:Object(h.jsx)(Fa,{currency:c,size:60})})]})},La=function(e){var t=e.name;return Object(h.jsx)("div",{className:"BotNameContainer",children:Object(h.jsx)("span",{className:"BotName",children:t})})},Ya=function(e){var t=e.strategy,a=e.age,c=e.is_enabled;return Object(h.jsxs)("div",{className:"BotInfoContainer",children:[Object(h.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(h.jsx)("div",{className:"BotInfoLabel",children:"Side:"}),"long"===t?Object(h.jsx)(Ca.a,{bg:"success",children:"Long"}):Object(h.jsx)(Ca.a,{bg:"danger",children:"Short"})]}),Object(h.jsxs)("div",{className:"BotInfoRecordContainer",children:[Object(h.jsx)("div",{className:"BotInfoLabel",children:"Age:"}),Object(h.jsx)("div",{className:"BotInfoValue",children:"".concat(a," days")})]}),!c&&Object(h.jsx)("div",{className:"BotInfoRecordContainer",children:Object(h.jsx)(Ca.a,{bg:"warning",text:"dark",children:"Disabled"})})]})},Ga=function(e){var t=e.returns,a=e.getReturns,c=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),r=Object(Pa.a)().t,n=t||0===t;return Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:r("dcaBotReturns")}),children:Object(h.jsxs)("div",{className:"BotReturnsContainer",children:[n&&Object(h.jsx)("div",{className:"BotReturnsValue",style:{color:t<0?"#FF0000":"#198754"},children:"".concat(c.format(t||0))}),Object(h.jsx)("div",{className:"BotReturnsLabel",children:"Returns (30d)"}),!n&&Object(h.jsx)(Fe.a,{onClick:function(){a()},variant:"link",size:"sm",active:!0,children:"Calculate"})]})})},Ua=(a(328),function(e){var t=e.account,a=e.bot,r=e.deals,n=Object(Pa.a)().t,s=Object(c.useContext)(Ye).strategiesState,i=Object(c.useContext)($e).dealsState.activeDeals,o=Object(l.g)(),u=Object(c.useState)({value:0,currency:""}),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(c.useState)(0),O=Object(j.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)([]),g=Object(j.a)(x,2),_=g[0],C=g[1],S=Object(c.useState)(0),B=Object(j.a)(S,2),w=B[0],N=B[1],T=Object(c.useState)({value:0,currency:""}),k=Object(j.a)(T,2),D=k[0],I=k[1],A=Object(c.useState)({value:0,currency:""}),F=Object(j.a)(A,2),P=F[0],M=F[1],E=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2}),R=1===a.pairs.length?a.pairs[0].split("_").reverse().join("/"):"".concat(a.pairs.length," pairs"),H=1===a.pairs.length?"":"".concat(a.pairs[0].split("_")[0]," market"),L=a.strategy_list.map((function(e){return Object(h.jsx)("div",{children:"".concat(Ea(s,e.strategy)).concat(e.options&&e.options.type?", ".concat(Ea(s,e.options.type)):"").concat(e.options&&e.options.percent?", ".concat(e.options.percent,"%"):"").concat(e.options&&e.options.time?", ".concat(e.options.time):"").concat(e.options&&e.options.points?", ".concat(e.options.points):"")},"".concat(Math.random()))}));return Object(c.useEffect)((function(){a.id&&t.id&&function(e,t){return bt.apply(this,arguments)}(a,t).then((function(e){I(e)}))}),[a,t]),Object(c.useEffect)((function(){a&&a.id&&a.id in i&&(M(function(e,t,a){var c=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],n=c,s=0;return"short"===t.strategy&&ot(a.market_code)?(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_base_funds.toString())}),0),n=r):(s=e.reduce((function(e,t){return e+parseFloat(t.reserved_quote_funds.toString())}),0),n=c),{value:s,currency:n}}(i[a.id].list,a,t)),f(function(e,t,a){var c=t.pairs[0].split("_")[0],r=t.pairs[0].split("_")[1],n=0,s=c;"long"===t.strategy?(n=e.reduce((function(e,t){return e+parseFloat(t.bought_volume)}),0),s=c):"short"===t.strategy&&ot(a.market_code)?(n=e.reduce((function(e,t){return e+parseFloat(t.sold_amount)}),0),s=r):"short"!==t.strategy||ot(a.market_code)||(n=e.reduce((function(e,t){return e+parseFloat(t.sold_volume)}),0),s=c);var i=parseFloat(t.leverage_custom_value);return{value:i?n/i:n,currency:s}}(i[a.id].list,a,t)))}),[i,a]),Object(c.useEffect)((function(){C(Zt(r))}),[r]),Object(c.useEffect)((function(){N(function(e){var t=e.map((function(e){var t=Ke()(e.created_at);return(e.closed_at?Ke()(e.closed_at):Ke()()).diff(t)})),a=y.a.sum(t)/t.length||0;return Ke.a.utc(a).format("HH:mm")}(_))}),[_]),Object(c.useEffect)((function(){D.value&&b.value&&v(b.value/D.value)}),[D,b]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Account"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:Object(h.jsxs)("div",{style:{display:"flex"},children:["market_icon"in t&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(t.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),o({pathname:"/accounts/".concat(t.id),search:window.location.search})},href:"#",children:t.name})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Bot pairs"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:R}),Object(h.jsx)("div",{children:H})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Deal start condition"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:L})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Active deals/Max"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.active_deals_count,"/").concat(a.max_active_deals)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotFundsUsed")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Funds used"})}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:"".concat(dt(b)," ").concat(b.currency)}),Object(h.jsx)("div",{style:{fontSize:"10px"},children:"".concat(E.format(m)," of max usage")})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotMaxUsage")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max usage"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(dt(D)," ").concat(D.currency)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotReservedFunds")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Reserved funds"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(dt(P)," ").concat(D.currency)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Total finished deals"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:_.length})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Avg deal duration"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(w," hrs")})]})]})}),za=(a(329),function(e){e.account;var t=e.bot,a=e.deals,r=e.fromFilter,n=e.toFilter,s=Object(Pa.a)().t,i=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",signDisplay:"always"}),o=new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,signDisplay:"always"}),l=Object(c.useState)({value:0,currency:""}),u=Object(j.a)(l,2),d=u[0],b=u[1],p=Object(c.useState)({value:0,currency:""}),O=Object(j.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)({value:0,currency:""}),g=Object(j.a)(x,2),_=g[0],C=g[1],S=Object(c.useState)({value:0,currency:""}),B=Object(j.a)(S,2),w=B[0],N=B[1],T=Object(c.useState)(0),k=Object(j.a)(T,2),D=k[0],I=k[1],A=Object(c.useState)([]),F=Object(j.a)(A,2),P=F[0],M=F[1];return Object(c.useEffect)((function(){M(Zt(a)),C(function(e,t,a,c){var r=Ke.a.utc(e),n=Ke.a.utc(a).startOf("day"),s=Ke.a.utc(c).startOf("day"),i=Ke.a.max([n,r]),o=y.a.unzip(y.a.zip.apply(y.a,Object(f.a)(Ut(t))).filter((function(e){return!e[0].isBefore(i,"day")&&!e[0].isAfter(s,"day")})));return{value:y.a.mean(o[1]),currency:"$"}}(t.created_at,a,r,n)),t.maxUsage&&N({value:jt(t.maxUsage,a),currency:"%"}),I(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0}(a))}),[a,t]),Object(c.useEffect)((function(){b(function(e){return{value:y.a.mean(e.map((function(e){return parseFloat(e.final_profit_percentage)})))||0,currency:"%"}}(P)),v(function(e){return{value:y.a.mean(e.map((function(e){return parseFloat(e.usd_final_profit)})))||0,currency:"$"}}(P))}),[P]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Today's profit/loss"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat((t.todayUsdProfit||0)<0?"showRed":"showGreen"),children:i.format(t.todayUsdProfit||0)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Total profit/loss"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(D<0?"showRed":"showGreen"),children:i.format(D)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:s("dcaBotCurrentPnl")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Current uPnL"})}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(parseFloat(t.active_deals_usd_profit)<0?"showRed":"showGreen"),children:i.format(parseFloat(t.active_deals_usd_profit))})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:s("dcaBotAverageTP")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average TP, %"})}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(d.value<0?"showRed":"showGreen"),children:"".concat(dt(d),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average profit from deal"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(m.value<0?"showRed":"showGreen"),children:i.format(m.value||0)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average daily profit"}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(_.value<0?"showRed":"showGreen"),children:i.format(_.value)})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:s("dcaBotMaxReturnsTime")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Returns"})}),Object(h.jsx)("div",{className:"BotInfoTableRow ".concat(w.value<0?"showRed":"showGreen"),children:o.format(w.value)})]})]})}),Va=(a(330),function(e){var t=e.account,a=e.bot,r=(Object(Pa.a)().t,Object(c.useState)({value:0,currency:"",additionalCurrency:""})),n=Object(j.a)(r,2),s=n[0],i=n[1],o=Object(c.useState)({value:0,currency:"",additionalCurrency:""}),l=Object(j.a)(o,2),u=(l[0],l[1]);Object(c.useEffect)((function(){a.id&&t.id&&(i(function(e,t){var a=e.pairs[0].split("_")[0],c=e.pairs[0].split("_")[1],r=a,n="";return"percent"===e.base_order_volume_type?(r="%",n="short"===e.strategy&&ot(t.market_code)?c:""):r="quote_currency"===e.base_order_volume_type?a:c,{value:parseFloat(e.base_order_volume),currency:r,additionalCurrency:n}}(a,t)),u(ut(a,t)))}),[a,t]);var d=a.leverage_custom_value?parseInt(a.leverage_custom_value):"",b="not_specified"!==a.leverage_type?a.leverage_type:"";return Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Profit currency"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"quote_currency"===a.profit_currency?"Quote":"Base"})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Take profit (type)"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:"".concat(dt({value:parseFloat(a.take_profit),currency:"%"}),"%")}),Object(h.jsx)("div",{children:"total"===a.take_profit_type?"(from total volume)":"(from base volume)"})]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Trailing"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[a.trailing_enabled&&"".concat(dt({value:parseFloat(a.trailing_deviation),currency:"%"}),"%"),!a.trailing_enabled&&"OFF"]})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Stop loss (timeout)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(dt({value:parseFloat(a.stop_loss_percentage),currency:"%"}),"% (").concat(a.stop_loss_timeout_in_seconds," s)")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Base order size (type)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{children:"".concat(dt(s)," ").concat(s.currency).concat(s.additionalCurrency?" (".concat(s.additionalCurrency,")"):"")}),Object(h.jsx)("div",{children:"(".concat(a.start_order_type,")")})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Leverage (type)"}),Object(h.jsxs)("div",{className:"BotInfoTableRow",children:[Object(h.jsx)("div",{children:d||"0"}),Object(h.jsx)("div",{children:b})]})]})]})}),$a=(a(331),a(332),function(e){var t=e.account,a=e.bot,r=e.deals,n=Object(Pa.a)().t,s=Object(c.useState)({value:0,currency:"",additionalCurrency:""}),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)(0),d=Object(j.a)(u,2),b=d[0],p=d[1];Object(c.useEffect)((function(){var e,c,r;a.id&&t.id&&(l(ut(a,t)),p((e=parseFloat(a.safety_order_step_percentage),c=a.max_safety_orders,r=parseFloat(a.martingale_step_coefficient),Object(f.a)(Array(c)).reduce((function(t,a,c){return t+e*Math.pow(r,c)}),0))))}),[a,t]);var O=Object(c.useState)([]),m=Object(j.a)(O,2),v=m[0],x=m[1];Object(c.useEffect)((function(){x(Zt(r))}),[r]);var g=Object(c.useState)(0),_=Object(j.a)(g,2),C=_[0],S=_[1],B=Object(c.useState)(0),w=Object(j.a)(B,2),N=w[0],T=w[1],k=Object(c.useState)(0),D=Object(j.a)(k,2),I=D[0],A=D[1];return Object(c.useEffect)((function(){S(y.a.mean(v.map((function(e){return e.completed_safety_orders_count})))),T(v.filter((function(e){return 0===e.completed_safety_orders_count})).length),A(v.filter((function(e){return e.completed_safety_orders_count===a.max_safety_orders})).length)}),[v]),Object(h.jsxs)("div",{className:"BotInfoTable",children:[Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max safety trades (active)"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(a.max_safety_orders," (").concat(a.active_safety_orders_count,")")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotSafetyPriceDeviation")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Price deviation to open SO"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(dt({value:parseFloat(a.safety_order_step_percentage),currency:"%"}),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO size"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(dt(o)," ").concat(o.currency).concat(o.additionalCurrency?" (".concat(o.additionalCurrency,")"):"")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotSafetyVolumeScale")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO volume scale"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_volume_coefficient})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotSafetyStepScale")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"SO step scale"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:a.martingale_step_coefficient})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:n("dcaBotSafetyMaxPrice")}),children:Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Max price deviation"})}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:"".concat(dt({value:b,currency:"%"}),"%")})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"Average # SO completed"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:v.length>0&&dt({value:C,currency:"%"})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"None SO completed"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:v.length>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(N," deals")}),Object(h.jsx)("div",{children:"".concat(dt({value:N/v.length*100,currency:"%"}),"%")})]})})]}),Object(h.jsxs)("div",{className:"BotInfoTableColumn",children:[Object(h.jsx)("div",{className:"BotInfoTableHeader",children:"All SO completed"}),Object(h.jsx)("div",{className:"BotInfoTableRow",children:v.length>0&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:"".concat(I," deals")}),Object(h.jsx)("div",{children:"".concat(dt({value:I/v.length*100,currency:"%"}),"%")})]})})]})]})}),qa=function(e){var t=e.bot,a=e.deals,c=e.account,r=e.infoKey,n=e.setInfoKey,s=e.fromFilter,i=e.toFilter,o=Pt(Ke()(),Ke()(t.created_at));return Object(h.jsxs)("div",{className:"DCABotDetailsInfo",children:[Object(h.jsxs)("div",{className:"DCABotDetailsInfoLogo",children:[Object(h.jsx)(Ha,{bot:t}),Object(h.jsx)(Ya,{strategy:t.strategy,age:o,is_enabled:t.is_enabled})]}),Object(h.jsx)("div",{className:"DCABotDetailsInfoTable",children:Object(h.jsxs)(ka.a,{activeKey:r,onSelect:function(e){return n(e)},children:[Object(h.jsx)(Da.a,{eventKey:"main",title:"Main",tabClassName:"InfoTab",children:Object(h.jsx)(Ua,{account:c,bot:t,deals:a})}),Object(h.jsx)(Da.a,{eventKey:"settings",title:"Settings",tabClassName:"InfoTab",children:Object(h.jsx)(Va,{account:c,bot:t})}),Object(h.jsx)(Da.a,{eventKey:"profits",title:"Profits",tabClassName:"InfoTab",children:Object(h.jsx)(za,{account:c,bot:t,deals:a,fromFilter:s,toFilter:i})}),Object(h.jsx)(Da.a,{eventKey:"safeties",title:"Safeties",tabClassName:"InfoTab",children:Object(h.jsx)($a,{account:c,bot:t,deals:a})})]})})]})},Wa=(a(333),[{value:"all",label:"All"},{value:"Cancelled",label:"Cancelled"},{value:"StopLoss",label:"StopLoss"},{value:"Failed",label:"Failed"},{value:"Completed",label:"Completed"},{value:"Closed at Market Price",label:"Closed at Market Price"},{value:"Liquidated",label:"Liquidated"},{value:"Switched",label:"Switched"}]),Ka=function(){var e=Object(l.h)(),t=Object(l.g)(),a=Object(c.useContext)(Ue),r=a.botsState,n=a.botsDispatch,s=Object(c.useContext)($e),i=s.dealsState,o=s.dealsDispatch,u=i.activeDeals,d=Object(c.useContext)(Ue).botsState.bots,b=Object(c.useContext)(Ge).errorsDispatch,p=Object(c.useContext)(Le).accountsState.accounts,O=Object(c.useState)("30d"),m=Object(j.a)(O,2),x=m[0],y=m[1],g=Object(c.useState)(NaN),_=Object(j.a)(g,2),C=_[0],S=_[1],B=tt(C),w=Object(c.useState)(null),N=Object(j.a)(w,2),T=N[0],k=N[1],D=Object(c.useState)([]),I=Object(j.a)(D,2),A=I[0],F=I[1],P=Object(c.useState)(!1),R=Object(j.a)(P,2),H=R[0],L=R[1],Y=Object(c.useState)(!1),G=Object(j.a)(Y,2),U=G[0],z=G[1],V=Object(c.useState)({}),$=Object(j.a)(V,2),q=$[0],W=$[1],K=Object(c.useState)("main"),J=Object(j.a)(K,2),Z=J[0],Q=J[1],X=Object(c.useState)(0),ee=Object(j.a)(X,2),te=ee[0],ae=ee[1],ce=Object(c.useState)("all"),re=Object(j.a)(ce,2),ne=re[0],se=re[1],ie=Object(c.useState)("finished"),oe=Object(j.a)(ie,2),le=oe[0],ue=oe[1],de=Object(c.useState)("all"),be=Object(j.a)(de,2),je=be[0],fe=be[1],pe=Object(c.useState)([]),he=Object(j.a)(pe,2),Oe=he[0],me=he[1],ve=Object(c.useState)(new Date("2018-04-02")),xe=Object(j.a)(ve,2),ye=xe[0],ge=xe[1],_e=Object(c.useState)(new Date),Ce=Object(j.a)(_e,2),Se=Ce[0],Be=Ce[1],we=function(){se("all"),fe("all"),ge(new Date("2018-04-02")),Be(new Date)},Ne=function(){M(Math.random()),function(e,t,a,c){na.apply(this,arguments)}(n,r,b,C),ha(i,o,b,C,!0),ma(o,b,C,!0)};return Object(c.useEffect)((function(){e.botId&&S(parseInt(e.botId))}),[e]),Object(c.useEffect)((function(){M(Math.random()),C&&!B&&(ha(i,o,b,C),ma(o,b,C))}),[C]),Object(c.useEffect)((function(){T&&W(p[T.account_id])}),[T]),Object(c.useEffect)((function(){C&&k(d[C])}),[C,d]),Object(c.useEffect)((function(){C&&("30d"===x?L(!qt(i,C)):"allTime"===x&&L(!Wt(i,C)),z(!Wt(i,C)))}),[i,x,C]),Object(c.useEffect)((function(){if(C){var e=[];"30d"===x?e=Kt(i,C):"allTime"===x&&(e=Jt(i,C)),we(),F(e)}}),[H,U,x,C]),Object(c.useEffect)((function(){if(C){var e=[];"30d"===x?e=Kt(i,C):"allTime"===x&&(e=Jt(i,C)),e=function(e,t){return!t||Ke()("01-04-2018","MM-DD-YYYY").isAfter(t,"day")?e:e.filter((function(e){return Ke()(e.closed_at).isSame(t,"day")||Ke()(e.closed_at).isAfter(t)}))}(e=function(e,t){return!t||Ke()().isSame(t,"day")?e:e.filter((function(e){return Ke()(e.closed_at).isSame(t,"day")||Ke()(e.closed_at).isBefore(t)}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.localized_status===t}))}(e=function(e,t){return"all"===t?e:e.filter((function(e){return e.pair===t}))}(e,je),ne),Se),ye),F(e)}}),[je,ne,ye,Se]),Object(c.useEffect)((function(){if(C&&T&&i.deals[C]&&i.deals[C].offset){var e=i.deals[C].offset||0;ae(Math.ceil(100*e/parseFloat(T.finished_deals_count)))}}),[i,C,T]),Object(c.useEffect)((function(){T&&me([{value:"all",label:"All"}].concat(Object(f.a)(T.pairs.map((function(e){return{value:e,label:e.split("_").reverse().join("/")}})))))}),[T]),Object(c.useEffect)((function(){return function(){var e=E();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(h.jsxs)("div",{className:"DCABotDetails",children:[Object(h.jsx)(Fe.a,{variant:"primary",size:"sm",className:"DCABotDetailsGetBackButton",onClick:function(){t(-1)},children:"< Back to bots list"}),!U&&Object(h.jsx)(Fe.a,{variant:"primary",size:"sm",onClick:function(){Ne()},children:"Refresh data"}),H&&!te&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(h.jsx)(It.a,{now:100,animated:!0,className:"BotDetailsProgressBar"})})}),H&&!!te&&Object(h.jsx)(h.Fragment,{children:Object(h.jsx)("div",{className:"BotDetailsProgressBarContainer",children:Object(h.jsx)(It.a,{now:te,label:"".concat(te,"%"),className:"BotDetailsProgressBar"})})}),!H&&T&&q&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(ga,{bot:T,deals:A,account:q,infoKey:Z,timeRangeValue:x}),Object(h.jsxs)("div",{className:"BotDetailsControlsContainer",children:[Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsxs)(Je.a,{children:[Object(h.jsx)(Ze.a,{id:"radio-finished",type:"radio",variant:"outline-primary",name:"radio-dealStateSwitcher",value:"finished",checked:"finished"===le,onChange:function(e){return ue(e.currentTarget.value)},children:"Finished"}),Object(h.jsx)(Ze.a,{id:"radio-active",type:"radio",variant:"outline-primary",name:"radio-dealStateSwitcher",value:"active",checked:"active"===le,onChange:function(e){return ue(e.currentTarget.value)},children:"Active"})]})}),"finished"===le&&Object(h.jsxs)(h.Fragment,{children:[" ",Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsx)(Je.a,{children:[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}].map((function(e,t){return Object(h.jsx)(Ze.a,{id:"radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:x===e.value,onChange:function(e){return y(e.currentTarget.value)},children:e.name},t)}))})}),Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"Status:"}),Object(h.jsx)(At.a,{onChange:function(e){se(e.value)},value:Wa.find((function(e){return e.value===ne})),className:"BotDetailsStatusFilter",theme:function(e){return Object(v.a)(Object(v.a)({},e),{},{colors:Object(v.a)(Object(v.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})},options:Wa})]}),T&&T.pairs.length>1&&Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"Pair:"}),Object(h.jsx)(At.a,{onChange:function(e){fe(e.value)},value:Oe.find((function(e){return e.value===je})),className:"BotDetailsPairFilter",options:Oe,theme:function(e){return Object(v.a)(Object(v.a)({},e),{},{colors:Object(v.a)(Object(v.a)({},e.colors),{},{primary25:"#00a59a",primary:"#00a59a"})})}})]}),"allTime"===x&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"From:"}),Object(h.jsx)(yt.a,{dateFormat:"dd/MM/yyyy",selected:ye,onChange:function(e){ge(e)},selectsStart:!0,startDate:ye,endDate:Se,className:"BotDetailsDateFilter",strictParsing:!0})]}),Object(h.jsxs)("div",{className:"BotDetailsControl",children:[Object(h.jsx)("div",{className:"BotDetailsFilterTitle",children:"To:"}),Object(h.jsx)(yt.a,{dateFormat:"dd/MM/yyyy",selected:Se,onChange:function(e){return Be(e)},selectsEnd:!0,startDate:ye,endDate:Se,minDate:ye,className:"BotDetailsDateFilter",strictParsing:!0})]})]}),Object(h.jsx)("div",{className:"BotDetailsControl",children:Object(h.jsx)(Fe.a,{variant:"primary",onClick:function(){we()},children:"Clear filters"})})]})]}),Object(h.jsxs)("div",{className:"DCABotInfoGroup",children:[Object(h.jsx)("div",{className:"DCABotName",children:T.name}),Object(h.jsx)("div",{className:"DCABotId",children:"(Bot ID: ".concat(T.id,")")}),Object(h.jsx)("div",{className:"DCABotLinkTo3Commas",children:Object(h.jsx)(Fe.a,{onClick:function(){window.open("https://3commas.io/bots/".concat(C),"_blank")},variant:"link",size:"sm",active:!0,children:"Open in 3Commas"})})]}),Object(h.jsx)(qa,{bot:T,deals:A,account:q,infoKey:Z,setInfoKey:Q,fromFilter:ye,toFilter:Se}),"finished"===le&&A.length>0&&Object(h.jsx)(wa,{bot:T,deals:A,dealStateSwitcher:le}),"active"===le&&T.id&&T.id in u&&u[T.id].list.length>0&&Object(h.jsx)(wa,{bot:T,deals:u[T.id].list,dealStateSwitcher:le})]})]})},Ja=(a(345),function(){var e=Object(c.useContext)(Ue),t=e.botsState,a=e.botsDispatch,r=Object(c.useContext)(Le).accountsState,n=r.accounts,s=r.list,i=t.filters,o=function(){var e=Object(b.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setBotsFilters",payload:Object(v.a)(Object(v.a)({},t.filters),c)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(s.map((function(e){return{value:e,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(n[e].market_icon,")")}})}),Object(h.jsx)("span",{children:n[e].name})]}),label_id:n[e].name}})))),u=[{value:"",label:"All"},{value:"enabled",label:"Enabled"},{value:"disabled",label:"Disabled"}],j=[{value:"",label:"All"},{value:"long",label:"Long"},{value:"short",label:"Short"}],p=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"created_at-desc",label:"Age (Youngest first)"},{value:"created_at-asc",label:"Age (Oldest first)"}];return Object(c.useEffect)((function(){try{localStorage.setItem("botsFiltersState",JSON.stringify(i))}catch(e){}}),[i]),Object(h.jsxs)("div",{className:"BotsFilters",children:[Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(At.a,{onChange:function(e){o({account:e.value})},value:l.find((function(e){return e.value===i.account})),options:l,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(h.jsx)(At.a,{onChange:function(e){o({scope:e.value})},value:u.find((function(e){return e.value===i.scope})),options:u,className:"ScopeFilter"})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Side"}),Object(h.jsx)(At.a,{onChange:function(e){o({type:e.value})},value:j.find((function(e){return e.value===i.type})),options:j,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"BotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(h.jsx)(At.a,{onChange:function(e){o({sorting:e.value})},value:p.find((function(e){return e.value===i.sorting})),options:p,className:"Sorting"})]})]})}),Za=a(201),Qa=(a(346),a(20)),Xa=(a(347),function(){var e=Object(c.useContext)(Ue),t=e.botsState,a=e.botsDispatch,r=Object(c.useContext)($e),n=r.dealsState,s=r.dealsDispatch,i=n.deals,o=t.list,l=t.hasMore,u=t.offset,f=t.bots,p=Object(c.useContext)(Ge).errorsDispatch,O=Object(c.useState)(!1),m=Object(j.a)(O,2),v=m[0],x=m[1],g=Object(c.useState)(!1),_=Object(j.a)(g,2),C=_[0],S=_[1],B=Object(c.useState)(0),w=Object(j.a)(B,2),N=w[0],T=w[1],k=Object(c.useState)([[],[]]),D=Object(j.a)(k,2),I=D[0],A=D[1],F=Object(c.useState)([[],[]]),P=Object(j.a)(F,2),R=P[0],H=P[1],L=Object(c.useState)([[],[],[]]),Y=Object(j.a)(L,2),G=Y[0],U=Y[1],z=function(){var e=Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l||0===u){e.next=3;break}return e.next=3,ca(a,t,p,!1,100);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){z().then((function(){l||S(!0)}))}),[u]);var V=function(){var e=Object(b.a)(d.a.mark((function e(){var t,a,c;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:M(Math.random()),t=Object(Qa.a)(o),e.prev=2,t.s();case 4:if((a=t.n()).done){e.next=11;break}if(c=a.value,qt(n,c)){e.next=9;break}return e.next=9,fa(n,s,p,c);case 9:e.next=4;break;case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),t.e(e.t0);case 16:return e.prev=16,t.f(),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[2,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){C&&V().then((function(){x(!0)}))}),[C]),Object(c.useEffect)((function(){if(v){var e=function(e,t){return t.reduce((function(t,a){var c=Rt(Kt(e,a));return y.a.mergeWith(c,t,(function(e,t){return(e=e||0)+(t||0)}))}),{})}(n,o);A(Yt(e)),H(Gt(e)),U(function(e){var t=e.list.map((function(t){var a=e.bots[t];return{maxUsage:a.maxUsage||0,name:a.name,fundsLocked:lt(a)}})),a=y.a.sortBy(t,["maxUsage","fundsLocked"]).reverse().slice(0,10);return[a.map((function(e){return e.name})),a.map((function(e){return Math.round(100*(e.fundsLocked+Number.EPSILON))/100})),a.map((function(e){return Math.round(100*(e.maxUsage+Number.EPSILON))/100}))]}(t))}}),[v,f]),Object(c.useEffect)((function(){return function(){var e=E();e.stop({dropWaitingJobs:!0}).then((function(){return e.disconnect()}))}}),[]),Object(c.useEffect)((function(){var e=o.filter((function(e){return qt(n,e)}));T(e.length/o.length*100)}),[i]),Object(h.jsxs)("div",{className:"BotsListCharts",children:[!v&&Object(h.jsx)("div",{className:"ProgressBar",children:C?Object(h.jsx)(It.a,{now:Math.ceil(N),label:"".concat(Math.ceil(N),"%")}):Object(h.jsx)(It.a,{animated:!0,now:100})}),v&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(ft.c,{options:_t("Total Accumulative Profit (30 days), $"),data:{labels:R[0],datasets:[{label:"Accumulative Profit, $",data:R[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(ft.a,{options:gt("Total Profit (30 days), $"),data:{labels:I[0],datasets:[{label:"Profit, $",data:I[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"ChartContainer",children:Object(h.jsx)(ft.a,{options:St("Funds locked/Max usage, $",G[0]),data:{labels:G[0],datasets:[{label:"Funds locked, $",data:G[1],borderColor:"rgb(255, 99, 132)",backgroundColor:"rgba(255, 99, 132, 0.8)"},{label:"Max usage, $",data:G[2],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})]})}),ec=function(){var e=Object(c.useContext)(Ue),t=e.botsState,a=e.botsDispatch,r=Object(c.useContext)($e).dealsState.deals,n=t.list,s=t.hasMore,i=t.filters,o=t.bots,l=Object(c.useContext)(Le).accountsState.accounts,u=Object(c.useContext)(Ge).errorsDispatch,f=Object(c.useState)(!1),p=Object(j.a)(f,2),O=p[0],m=p[1],v=!s&&0===n.length,x=tt(i);return Object(c.useEffect)((function(){!x&&n.length?m(function(e,t){return e.every((function(e){return e in t}))}(n,r)):(m(!1),ca(a,t,u,!0).then())}),[i]),v?Object(h.jsx)("div",{className:"FallbackContainer",children:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"No results found =("})})}):Object(h.jsxs)(Za.a,{dataLength:n.length,next:Object(b.a)(d.a.mark((function e(){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.length){e.next=3;break}return e.next=3,ca(a,t,u,!1);case 3:case"end":return e.stop()}}),e)}))),hasMore:s,loader:Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(De.a,{animation:"grow"})}),endMessage:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"Yay! You have seen it all"})}),children:[O?Object(h.jsx)(Xa,{}):Object(h.jsx)("div",{className:"ShowChartsButtonContainer",children:Object(h.jsx)(Fe.a,{className:"ShowChartsButton",onClick:function(){m(!0)},children:"Calculate profits"})}),Object(h.jsx)("div",{className:"BotsList",children:n.map((function(e){return Object(h.jsx)(Ra,{botItem:o[e],account:l[o[e].account_id]},e)}))}),0===n.length&&Object(h.jsx)("div",{className:"SpinnerContainer",children:Object(h.jsx)(De.a,{animation:"grow"})})]})},tc=(a(348),function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(Ja,{}),Object(h.jsx)(ec,{})]})}),ac=(a(349),function(e){return e.profits.filter((function(e){return function(e){return Ft(Ke()(),Ke()(e.created_at))}(e)<=720}))}),cc=function(e){return e.grid_lines_orders.filter((function(e){return function(e){return Ft(Ke()(),Ke()(e.created_at))}(e)<=720}))},rc=function(e,t,a){var c=y.a.groupBy(e,(function(e){return Ke()(e.created_at).format("YYYY-MM-DD")})),r=y.a.groupBy(t,(function(e){return Ke()(e.updated_at).format("YYYY-MM-DD")})),n=y.a.mapValues(c,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit)})))})),s=y.a.mapValues(r,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.total)})))*a*.01*-1}));return y.a.mergeWith({},n,s,y.a.add)},nc=function(e){return{type:"setNewGridBotsList",payload:e}},sc=function(e){return{type:"setHasMore",payload:e}},ic=function(e){return{type:"addToGridBotsList",payload:e}},oc=function(e,t){return{type:"setGridBot",payload:{gridBotId:e,gridBot:t}}},lc=["Account::BinanceAccount","Accounts::Ftx","Account::HuobiAccount","Account::OkexAccount","Account::KucoinAccount","Account::GateIoAccount","Account::KrakenAccount","Account::BitfinexAccount","Account::BinanceUsAccount","Account::BitstampAccount","Accounts::GeminiAccount","Account::BittrexAccount","Account::GdaxAccount","Account::PaperTradingAccount"];function uc(){return(uc=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u,b,j;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(sc(!0)),t(nc([])),n=a.limit,s=a.filters,i=s.sorting,o=s.account,l=r||n,e.prev=4,u=0,b=!0;case 7:if(!b){e.next=18;break}return e.next=10,Y(u,l,i,o,lc);case 10:if(!(j=e.sent).error){e.next=13;break}return e.abrupt("break",18);case 13:t(ic(j)),u+=l,j.length<l&&(b=!1),e.next=7;break;case 18:t(sc(!1)),e.next=26;break;case 21:e.prev=21,e.t0=e.catch(4),t(nc([])),t(sc(!1)),c({type:"addError",payload:"Error when fetching grid bots list"});case 26:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}function dc(e,t,a){return bc.apply(this,arguments)}function bc(){return(bc=Object(b.a)(d.a.mark((function e(t,a,c){var r,n,s,i,o,l,u,b;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,n=r[c],s=n.pair.split("_")[0],i=n.pair.split("_")[1],o="quote"===n.profit_currency_type?s:i,e.prev=5,"profits"in n&&n.profits){e.next=17;break}return e.next=9,V(c);case 9:return l=e.sent,u=y.a.sum(l.map((function(e){return parseFloat(e.profit)}))),e.next=13,ct("binance",o,u);case 13:return b=e.sent,e.abrupt("return",{profits:l,sumProfitsUsd:b});case 17:return e.abrupt("return",n.profits);case 18:e.next=24;break;case 20:return e.prev=20,e.t0=e.catch(5),a({type:"addError",payload:"Error when fetching profits for grid bot ".concat(n.name)}),e.abrupt("return",{});case 24:case"end":return e.stop()}}),e,null,[[5,20]])})))).apply(this,arguments)}function jc(e,t,a){return fc.apply(this,arguments)}function fc(){return(fc=Object(b.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.gridBots,n=r[c],e.prev=2,"marketOrders"in n&&n.marketOrders){e.next=10;break}return e.next=6,$(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.marketOrders);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(n.name)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function pc(e,t,a,c){return hc.apply(this,arguments)}function hc(){return(hc=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dc(a,c,r);case 2:return n=e.sent,s=a.gridBots,i=s[r],o=Object(v.a)(Object(v.a)({},i),{},{profits:n}),e.next=8,t(oc(r,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oc(){return(Oc=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,jc(a,c,r);case 2:return n=e.sent,s=a.gridBots,i=s[r],o=Object(v.a)(Object(v.a)({},i),{},{marketOrders:n}),e.next=8,t(oc(r,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(350),a(351);var mc=function(e){var t=e.values,a=e.investment,n=e.setModalGridBotId,s=Object(c.useContext)(ze).gridBotsState,i=s.list,o=s.gridBots,l=Object(c.useContext)(Le).accountsState,u=l.accounts,d=l.list,b=Object(Pa.a)().t,j=r.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account_id},disableSortBy:!0,Cell:function(e){var t=e.cell.value,a=d.filter((function(e){return e===t}))[0];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(u[a].market_icon,")")}}),Object(h.jsx)("div",{style:{width:"100px"},children:u[a].name})]})}},{Header:"Name",accessor:"name",disableSortBy:!0},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Fa,{currency:a}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Price range",tipText:b("gridBotPriceRange"),accessor:function(e,t){return"".concat(e.upper_price,"_").concat(e.lower_price,"_").concat(e.grids_quantity," levels")},id:"price_range",disableSortBy:!0,Cell:function(e){var t=e.cell.value.split("_");return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{style:{color:"#00A59A"},children:t[0]}),Object(h.jsx)("div",{style:{color:"#EE7D8B"},children:t[1]}),Object(h.jsx)("div",{style:{fontSize:"12px"},children:t[2]})]})}},{Header:"Start price",accessor:"start_price",disableSortBy:!0},{Header:"Current price",accessor:"current_price",disableSortBy:!0},{Header:"Active orders",tipText:b("gridBotActiveOrders"),accessor:function(e,t){e.grid_lines.length;var a=e.grid_lines.filter((function(e){return e.order_placed&&"sell"===e.side})).length,c=e.grid_lines.filter((function(e){return e.order_placed&&"buy"===e.side})).length;return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{marginBottom:"3px"},children:Object(h.jsx)(Ca.a,{style:{fontSize:"14px"},bg:"danger",children:a})}),Object(h.jsx)("div",{style:{marginBottom:"3px"},children:Object(h.jsx)(Ca.a,{style:{fontSize:"14px"},bg:"success",children:c})})]})},id:"activeOrder",disableSortBy:!0},{Header:"Bot profit",tipText:b("gridBotProfit"),accessor:function(e,t){var a=e.pair.split("_")[0],c=e.pair.split("_")[1];if(e.profits&&e.profits.profits){var r=y.a.sum(e.profits.profits.map((function(e){return parseFloat(e.profit)}))),n="quote"===e.profit_currency_type?a:c;return Object(h.jsx)("div",{children:"".concat(dt({value:r,currency:n})," ").concat(n)})}return""},id:"bot_profit",disableSortBy:!0},{Header:"Bot profit, $",tipText:b("gridBotProfit"),accessor:function(e,t){return e.profits&&e.profits.sumProfitsUsd?Object(h.jsx)("div",{children:"".concat(dt({value:e.profits.sumProfitsUsd,currency:"USD"})," USD")}):""},id:"bot_profit_usd",disableSortBy:!0},{Header:"Stats",Cell:function(e){e.cell.value;return Object(h.jsx)("div",{style:{display:"flex",width:"100%",height:"100%",alignItems:"center",justifyContent:"center"},children:Object(h.jsx)("img",{className:"stats",src:"stats.png",alt:"stats"})})},id:"stats",disableSortBy:!0}]}),[a,t]),f=Object(_a.useTable)({columns:j,data:i.map((function(e){return o[e]}))}),p=f.getTableProps,O=f.getTableBodyProps,m=f.headerGroups,x=f.rows,g=f.prepareRow,_=function(e){return Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})};return Object(h.jsx)("div",{className:"GridBotsListTable",children:Object(h.jsxs)(Qe.a,Object(v.a)(Object(v.a)({hover:!0},p()),{},{children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:m.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:e.tipText?Object(h.jsx)(Ia.a,{delay:{show:100,hide:200},overlay:Object(h.jsx)(Aa.a,{children:e.tipText}),children:_(e)}):_(e)}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},O()),{},{children:x.map((function(e,t){return g(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){n(e.original.id)},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},vc=(a(352),a(353),function(e){var t=e.gridBotId,a=e.profits,r=e.marketOrders,n=e.tradingFee,s=e.timeRangeValue,i=Object(c.useContext)(ze).gridBotsState.gridBots[t],o=i.pair.split("_")[0],l=Object(c.useState)([[],[]]),u=Object(j.a)(l,2),d=u[0],b=u[1],f=Object(c.useState)([[],[]]),p=Object(j.a)(f,2),O=p[0],m=p[1],v=function(e){return"".concat(e.dataset.label,": ").concat(dt({value:e.parsed.y,currency:o}))};return Object(c.useEffect)((function(){b(function(e,t,a,c,r){var n=rc(e,c,r),s="30d"===a?31:Math.max(Pt(Ke()(),Ke()(t.created_at))+1,31);return Gt(n,s)}(a,i,s,r,n)),m(function(e,t,a,c,r){var n=rc(e,c,r),s="30d"===a?31:Math.max(Pt(Ke()(),Ke()(t.created_at))+1,31);return Yt(n,s)}(a,i,s,r,n))}),[a,r,n]),Object(h.jsxs)("div",{className:"GridBotDetailsCharts",children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.c,{options:_t("Accumulative Profit, ".concat(o),v),data:{labels:d[0],datasets:[{label:"Accumulative Profit, ".concat(o),data:d[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:gt("Daily Profit, ".concat(o),v),data:{labels:O[0],datasets:[{label:"Profit, ".concat(o),data:O[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),xc=(a(354),function(e){var t=e.gridBotId,a=e.profits,r=e.marketOrders,n=e.tradingFee,s=e.timeRangeValue,i=Object(c.useContext)(ze).gridBotsState.gridBots[t],o="quote"===i.profit_currency_type?i.pair.split("_")[0]:i.pair.split("_")[1],l=Object(c.useState)(0),u=Object(j.a)(l,2),d=u[0],b=u[1],f=Object(c.useState)(0),p=Object(j.a)(f,2),O=p[0],m=p[1],v=Object(c.useState)(0),x=Object(j.a)(v,2),g=(x[0],x[1]),_=Object(c.useState)(0),C=Object(j.a)(_,2),S=C[0],B=C[1];return Object(c.useEffect)((function(){var e=y.a.sum(a.map((function(e){return parseFloat(e.profit)}))),t=e-y.a.sum(r.map((function(e){return parseFloat(e.total)})))*n*.01,c=i.initialInvestments?i.initialInvestments.allInQuote:0,s=c?100*t/c:0,o=Ke.a.utc(i.created_at),l=i.closed_at?Ke.a.utc(i.closed_at):Ke.a.utc();b(t),g(s),B(l.diff(o,"days"))}),[i,a,r,n,s]),Object(c.useEffect)((function(){var e=1;m((e="30d"===s&&S>30?30:S)?d/e:0)}),[S,d]),a&&r?Object(h.jsxs)(Qe.a,{hover:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Days running"}),Object(h.jsx)("th",{children:"Transactions"}),Object(h.jsx)("th",{children:"Avg. daily"}),Object(h.jsx)("th",{children:"Bot profit"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("td",{children:S}),Object(h.jsx)("td",{children:a?a.length:""}),Object(h.jsx)("td",{children:"".concat(dt({value:O,currency:o})," ").concat(o)}),Object(h.jsx)("td",{children:"".concat(dt({value:d,currency:o})," ").concat(o)})]})})]}):Object(h.jsx)(h.Fragment,{})}),yc=[{name:"30 days",value:"30d"},{name:"All time",value:"allTime"}],gc=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,r=e.gridBotId,n=Object(c.useContext)(ze),s=n.gridBotsState,i=n.gridBotsDispatch,o=Object(c.useContext)(Ge).errorsDispatch,u=s.gridBots[r],d=Object(c.useState)(0),b=Object(j.a)(d,2),f=b[0],p=(b[1],Object(c.useState)("30d")),O=Object(j.a)(p,2),m=O[0],v=O[1],x=Object(c.useState)([]),y=Object(j.a)(x,2),g=y[0],_=y[1],C=Object(c.useState)(),S=Object(j.a)(C,2),B=S[0],w=S[1],N=Object(c.useState)(null),T=Object(j.a)(N,2),k=T[0],D=T[1],I=Object(l.g)(),A=Object(c.useContext)(Le).accountsState.accounts;return Object(c.useEffect)((function(){u&&u.profits&&!u.marketOrders&&function(e,t,a,c){return Oc.apply(this,arguments)}(i,s,o,r).then(),u&&D(A[u.account_id])}),[u]),Object(c.useEffect)((function(){u&&u.profits&&u.marketOrders&&("30d"===m?(_(cc(u.marketOrders).filter((function(e){return"Filled"===e.status_string}))),w(ac(u.profits))):(_(u.marketOrders.grid_lines_orders.filter((function(e){return"Filled"===e.status_string}))),w(u.profits.profits)))}),[u,m]),Object(h.jsx)(h.Fragment,{children:u&&Object(h.jsxs)(Ae.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(h.jsx)(Ae.a.Header,{closeButton:!0,children:Object(h.jsxs)(Ae.a.Title,{children:["".concat(u.name,": ").concat(u.pair.split("_").reverse().join("/")),k&&Object(h.jsxs)("div",{style:{display:"flex",fontSize:"14px",marginTop:"4px"},children:["market_icon"in k&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(k.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),I({pathname:"/accounts/".concat(k.id),search:window.location.search})},href:"#",children:k.name})]})]})}),Object(h.jsxs)(Ae.a.Body,{children:[Object(h.jsx)("div",{className:"GridBotsDetailsFilters",children:Object(h.jsxs)("div",{className:"GridBotListControl",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Time range"}),Object(h.jsx)(Je.a,{children:yc.map((function(e,t){return Object(h.jsx)(Ze.a,{id:"detail-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio",value:e.value,checked:m===e.value,onChange:function(e){return v(e.currentTarget.value)},children:e.name},t)}))})]})}),B&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(xc,{gridBotId:r,profits:B,marketOrders:g,tradingFee:f,timeRangeValue:m}),Object(h.jsx)(vc,{gridBotId:r,profits:B,marketOrders:g,tradingFee:f,timeRangeValue:m})]})]})]})})},_c=function(){var e=Object(c.useContext)(ze),t=e.gridBotsState,a=e.gridBotsDispatch,r=t.list,n=t.hasMore,s=t.filters,i=Object(c.useContext)(Le).accountsState,o=i.accounts,l=i.list,u=Object(c.useContext)(Ge).errorsDispatch,p=Object(c.useState)("value"),O=Object(j.a)(p,2),m=O[0],x=(O[1],Object(c.useState)("usd")),y=Object(j.a)(x,2),g=y[0],_=(y[1],Object(c.useState)("")),C=Object(j.a)(_,2),S=C[0],B=C[1],w=function(){var e=Object(b.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setGridBotsFilters",payload:Object(v.a)(Object(v.a)({},t.filters),c)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=!n&&0===r.length,T=[{value:"",label:"All spot accounts",label_id:"All"}].concat(Object(f.a)(l.filter((function(e){return ot(o[e].market_code)})).map((function(e){return{value:e,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(o[e].market_icon,")")}})}),Object(h.jsx)("span",{children:o[e].name})]}),label_id:o[e].name}}))));return Object(c.useEffect)((function(){(function(e,t,a,c){return uc.apply(this,arguments)})(a,t,u).then()}),[s]),Object(c.useEffect)((function(){if(!n){var e,c=Object(Qa.a)(r);try{for(c.s();!(e=c.n()).done;){var s=e.value;pc(a,t,u,s).then()}}catch(i){c.e(i)}finally{c.f()}}}),[n,r]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"GridBotsFilters",children:Object(h.jsxs)("div",{className:"GridBotsFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(At.a,{onChange:function(e){w({account:e.value})},value:T.find((function(e){return e.value===s.account})),options:T,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]})}),N?Object(h.jsx)("div",{className:"FallbackContainer",children:Object(h.jsx)("p",{style:{textAlign:"center"},children:Object(h.jsx)("b",{children:"No results found =("})})}):Object(h.jsxs)("div",{className:"GridBotsList",children:[Object(h.jsx)(mc,{values:g,investment:m,setModalGridBotId:B}),!!S&&Object(h.jsx)(gc,{modalIsOpen:!!S,setModalIsOpen:B,gridBotId:S})]})]})},Cc=function(){return Object(h.jsx)(h.Fragment,{children:Object(h.jsx)(_c,{})})},Sc=function(e){return{type:"setNewSmartTradesList",payload:e}},Bc=function(e){return{type:"setHasMore",payload:e}},wc=function(e){return{type:"addToSmartTradesList",payload:e}},Nc=function(e,t){return{type:"setSmartTrade",payload:{smartTradeId:e,smartTrade:t}}};function Tc(){return(Tc=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o,l,u,b,j,f,p,h,O,m;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(Bc(!0)),t(Sc([])),n=a.limit,s=a.filters,i=s.sorting,o=s.accountId,l=s.type,u=s.pair,b=s.status,j=s.from,f=r||n,p=at(j),e.prev=5,h=!0,O=1;case 8:if(!h){e.next=19;break}return e.next=11,G(O,f,i,o,l,u,b,p);case 11:if(!(m=e.sent).error){e.next=14;break}return e.abrupt("break",19);case 14:t(wc(m)),O+=1,m.length<f&&(h=!1),e.next=8;break;case 19:t(Bc(!1)),e.next=27;break;case 22:e.prev=22,e.t0=e.catch(5),t(Sc([])),t(Bc(!1)),c({type:"addError",payload:"Error when fetching smart trades list"});case 27:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}function kc(e,t,a){return Dc.apply(this,arguments)}function Dc(){return(Dc=Object(b.a)(d.a.mark((function e(t,a,c){var r,n,s;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.smartTrades,n=r[c],e.prev=2,"trades"in n&&n.trades){e.next=10;break}return e.next=6,U(c);case 6:return s=e.sent,e.abrupt("return",s);case 10:return e.abrupt("return",n.trades);case 11:e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(2),a({type:"addError",payload:"Error when fetching market orders for grid bot ".concat(n.id)}),e.abrupt("return",{});case 17:case"end":return e.stop()}}),e,null,[[2,13]])})))).apply(this,arguments)}function Ic(){return(Ic=Object(b.a)(d.a.mark((function e(t,a,c,r){var n,s,i,o;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,kc(a,c,r);case 2:return n=e.sent,s=a.smartTrades,i=s[r],o=Object(v.a)(Object(v.a)({},i),{},{trades:n}),e.next=8,t(Nc(r,o));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a(355),a(356),a(357);var Ac=function(e){var t=e.smartTradeId,a=Object(c.useContext)(Ve).smartTradesState.smartTrades[t];return Object(h.jsx)("div",{className:"SmartTradeDetailsStatusTable",children:a&&Object(h.jsxs)(Qe.a,{striped:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Average entry"}),Object(h.jsx)("th",{children:"Average close"}),Object(h.jsx)("th",{children:"Current price"}),Object(h.jsx)("th",{children:"PnL, $"})]})}),Object(h.jsx)("tbody",{children:Object(h.jsxs)("tr",{style:{fontSize:"14px"},children:[Object(h.jsx)("td",{children:"".concat("smart_sell"===a.data.type||"smart_buy"===a.data.type?a.position.price.value:a.data.average_enter_price)}),Object(h.jsx)("td",{children:"".concat(a.data.average_close_price?a.data.average_close_price:"")}),Object(h.jsx)("td",{children:"".concat(a.data.current_price?a.data.current_price.last:"")}),Object(h.jsx)("td",{children:a.profit.usd?Object(h.jsx)(Ca.a,{bg:a.profit.usd>=0?"success":"danger",style:{fontSize:"13px"},children:"".concat(dt({value:a.profit.usd,currency:"USD"}),"$")}):""})]})})]})})},Fc=(a(358),function(e){e.smartTradeId;var t=e.trades,a={less:"<",less_or_equal:"<=",greater_or_equal:">=",greater:">"};return t&&Object(h.jsx)("div",{className:"SmartTradeDetailsTable",children:Object(h.jsxs)(Qe.a,{striped:!0,children:[Object(h.jsx)("thead",{children:Object(h.jsxs)("tr",{children:[Object(h.jsx)("th",{children:"Order"}),Object(h.jsx)("th",{children:"Price"}),Object(h.jsx)("th",{children:"Amount"}),Object(h.jsx)("th",{children:"Total"}),Object(h.jsx)("th",{children:"Trigger"}),Object(h.jsx)("th",{children:"Trailing"}),Object(h.jsx)("th",{children:"Status"}),Object(h.jsx)("th",{children:"Created"}),Object(h.jsx)("th",{children:"Updated"})]})}),Object(h.jsx)("tbody",{children:t.map((function(e){return Object(h.jsxs)("tr",{style:{fontSize:"14px"},children:[Object(h.jsx)("td",{children:"".concat(e.order_type," ").concat(e.order_side)}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"Desired: ".concat(e.initial_price?e.initial_price:"")}),Object(h.jsx)("div",{children:"Real: ".concat(e.realised_price?e.realised_price:"")})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"Desired: ".concat(e.initial_amount?e.initial_amount:"")}),Object(h.jsx)("div",{children:"Real: ".concat(e.realised_amount?e.realised_amount:"")})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"Desired: ".concat(e.initial_total?e.initial_total:"")}),Object(h.jsx)("div",{children:"Real: ".concat(e.realised_total?e.realised_total:"")})]}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{children:"".concat(e.trigger_condition?a[e.trigger_condition]:""," ").concat(e.trigger_price?e.trigger_price:"")})}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{children:"".concat(e.trail_value?e.trail_value:""," ").concat(e.trail_percentage?"(".concat(e.trail_percentage,"%)"):"")})}),Object(h.jsx)("td",{children:Object(h.jsx)("div",{children:"".concat(e.status?e.status:"")})}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"".concat(e.updated_at?Ke()(e.created_at).format("DD/MM/YYYY"):"")}),Object(h.jsx)("div",{children:"".concat(e.updated_at?Ke()(e.created_at).format("HH:mm"):"")})]}),Object(h.jsxs)("td",{children:[Object(h.jsx)("div",{children:"".concat(e.updated_at?Ke()(e.updated_at).format("DD/MM/YYYY"):"")}),Object(h.jsx)("div",{children:"".concat(e.updated_at?Ke()(e.updated_at).format("HH:mm"):"")})]})]},e.id)}))})]})})}),Pc=[{name:"Position",value:"position"},{name:"Take profit",value:"take_profit"},{name:"Reduce funds",value:"reduce_funds"},{name:"Stop loss",value:"stop_loss"},{name:"Panic",value:"panic"},{name:"All",value:""}],Mc=function(e){var t=e.modalIsOpen,a=e.setModalIsOpen,r=e.smartTradeId,n=Object(c.useContext)(Ve),s=n.smartTradesState,i=n.smartTradesDispatch,o=s.smartTrades[r],u=Object(c.useContext)(Ge).errorsDispatch,d=Object(c.useState)(""),b=Object(j.a)(d,2),f=b[0],p=b[1],O=Object(c.useState)([]),m=Object(j.a)(O,2),v=m[0],x=m[1],y=Object(c.useState)(null),g=Object(j.a)(y,2),_=g[0],C=g[1],S=Object(l.g)(),B=Object(c.useContext)(Le).accountsState.accounts;return Object(c.useEffect)((function(){r&&function(e,t,a,c){return Ic.apply(this,arguments)}(i,s,u,r).then()}),[r]),Object(c.useEffect)((function(){o&&o.trades&&x(o.trades),o&&C(B[o.account.id])}),[o]),Object(c.useEffect)((function(){f?x(o.trades.filter((function(e){return e.trade_purpose===f}))):o&&o.trades&&x(o.trades)}),[f]),Object(h.jsx)(h.Fragment,{children:o&&Object(h.jsxs)(Ae.a,{show:t,onHide:function(){a("")},scrollable:!0,size:"xl",children:[Object(h.jsx)(Ae.a.Header,{closeButton:!0,children:Object(h.jsxs)(Ae.a.Title,{children:["".concat(o.pair.split("_").reverse().join("/")," (Trade ID: ").concat(r,")"),_&&Object(h.jsxs)("div",{style:{display:"flex",fontSize:"14px",marginTop:"4px"},children:["market_icon"in _&&Object(h.jsx)("div",{className:"BotMarketIcon",style:{backgroundImage:"url(".concat(_.market_icon,")")}}),Object(h.jsx)("a",{onClick:function(e){e.preventDefault(),S({pathname:"/accounts/".concat(_.id),search:window.location.search})},href:"#",children:_.name})]})]})}),Object(h.jsxs)(Ae.a.Body,{children:[Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"SmartTradeDetailsControl",children:Object(h.jsx)(Ac,{smartTradeId:r})}),Object(h.jsx)("div",{className:"SmartTradeDetailsControl",children:Object(h.jsx)(Je.a,{children:Pc.map((function(e,t){return Object(h.jsx)(Ze.a,{id:"detail-position-range-radio-".concat(t),type:"radio",variant:"outline-primary",name:"radio-detail-position",value:e.value,checked:f===e.value,onChange:function(e){return p(e.currentTarget.value)},children:e.name},t)}))})})]}),v&&Object(h.jsx)(Fc,{smartTradeId:r,trades:v})]})]})})},Ec=function(e){var t=e.filter((function(e){return e.data.closed_at&&e.profit.usd})),a=y.a.groupBy(t,(function(e){return Ke()(e.data.closed_at).format("YYYY-MM-DD")}));return y.a.mapValues(a,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit.usd)})))}))},Rc=(a(359),function(){var e=Object(c.useContext)(Ve).smartTradesState,t=e.list,a=e.hasMore,r=e.smartTrades,n=e.filters,s=Object(c.useState)([[],[]]),i=Object(j.a)(s,2),o=i[0],l=i[1],u=Object(c.useState)([[],[]]),d=Object(j.a)(u,2),b=d[0],f=d[1],p=Object(c.useState)([[],[]]),O=Object(j.a)(p,2),m=O[0],v=O[1],x=function(e){return"".concat(e.dataset.label,": ").concat(dt({value:e.parsed.y,currency:"USD"}))};return Object(c.useEffect)((function(){l(function(e,t){var a=at(t),c=Ec(e);if(a)return Gt(c,Pt(Ke()(),Ke()(a)));var r=Ke.a.min(y.a.keys(c).map((function(e){return Ke()(e)})));return Gt(c,Pt(Ke()(),r))}(t.map((function(e){return r[e]})),n.from)),f(function(e,t){var a=at(t),c=Ec(e);if(a)return Yt(c,Pt(Ke()(),Ke()(a)));var r=Ke.a.min(y.a.keys(c).map((function(e){return Ke()(e)})));return Yt(c,Pt(Ke()(),r))}(t.map((function(e){return r[e]})),n.from)),v(function(e){var t=e.filter((function(e){return e.data.closed_at&&e.profit.usd})),a=y.a.groupBy(t,"pair"),c=y.a.mapValues(a,(function(e){return y.a.sum(e.map((function(e){return parseFloat(e.profit.usd)})))})),r=y()(c).toPairs().orderBy([1],["desc"]).value().slice(0,10);return[r.map((function(e){return e[0].split("_").reverse().join("/")})),r.map((function(e){return e[1]}))]}(t.map((function(e){return r[e]}))))}),[t]),a?Object(h.jsx)("div",{className:"SmartTradesChartsSpiner",children:Object(h.jsx)(De.a,{animation:"grow"})}):Object(h.jsxs)("div",{className:"SmartTradesCharts",children:[Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.c,{options:_t("Accumulative Profit, $",x),data:{labels:o[0],datasets:[{label:"Accumulative Profit, $",data:o[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)",fill:{value:0}}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:gt("Daily Profit, $",x),data:{labels:b[0],datasets:[{label:"Profit, $",data:b[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})}),Object(h.jsx)("div",{className:"DCABotDetailsChartContainer",children:Object(h.jsx)(ft.a,{options:St("Pairs leaderboard by profit",m[0]),data:{labels:m[0],datasets:[{label:"Profit, $",data:m[1],borderColor:"rgb(53, 162, 235)",backgroundColor:"rgba(53, 162, 235, 0.5)"}]}})})]})}),Hc=(a(360),[{name:"Today",value:"today"},{name:"Week",value:"week"},{name:"Month",value:"month"},{name:"All time",value:"allTime"},{name:"Custom",value:"custom"}]),Lc=function(){var e=Object(c.useContext)(Ve),t=e.smartTradesState,a=e.smartTradesDispatch,r=Object(c.useContext)(Le).accountsState,n=r.accounts,s=r.list,i=t.filters,o=t.hasMore,l=t.list,u=function(){var e=Object(b.a)(d.a.mark((function e(c){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:"setSmartTradesFilters",payload:Object(v.a)(Object(v.a)({},t.filters),c)});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=[{value:"",label:"All",label_id:"All"}].concat(Object(f.a)(s.map((function(e){return{value:e,label:Object(h.jsxs)("div",{className:"AccountFilterItem",children:[Object(h.jsx)("div",{children:Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(n[e].market_icon,")")}})}),Object(h.jsx)("span",{children:n[e].name})]}),label_id:n[e].name}})))),p=[{value:"",label:"All"},{value:"simple_buy",label:"Simple buy"},{value:"simple_sell",label:"Simple sell"},{value:"smart_sell",label:"Smart sell"},{value:"smart_cover",label:"Smart cover"},{value:"smart_buy",label:"Smart buy"},{value:"smart_trade",label:"Smart trade"}],O=[{value:"all",label:"All"},{value:"active",label:"Active"},{value:"finished",label:"Finished"},{value:"successfully_finished",label:"Successfully finished"},{value:"cancelled",label:"Cancelled"},{value:"failed",label:"Failed"}],m=[{value:"profit-desc",label:"Profit (Highest First)"},{value:"profit-asc",label:"Profit (Lowest First)"},{value:"profit_percentage-desc",label:"Profit percentage (Highest First)"},{value:"profit_percentage-asc",label:"Profit percentage (Lowest First)"},{value:"created_at-desc",label:"Opened (Youngest first)"},{value:"created_at-asc",label:"Opened (Oldest first)"},{value:"closed_at-desc",label:"Closed (Youngest first)"},{value:"closed_at-asc",label:"Closed (Oldest first)"},{value:"status-desc",label:"Status (Highest First)"},{value:"status-asc",label:"Status (Lowest First)"}];return Object(c.useEffect)((function(){try{localStorage.setItem("smartTradesFiltersState",JSON.stringify(i))}catch(e){}}),[i]),Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"SmartTradesFilters",children:[Object(h.jsx)("div",{className:"SmartTradesTimeRangeContainer",children:Object(h.jsx)(Je.a,{children:Hc.map((function(e,t){return Object(h.jsx)(Ze.a,{id:"radio-".concat(t),type:"radio",disabled:o,variant:"outline-primary",name:"radio",value:e.value,checked:i.from.label===e.value,onChange:function(e){u({from:Object(v.a)(Object(v.a)({},i.from),{},{label:e.currentTarget.value})})},children:e.name},t)}))})}),"custom"===i.from.label&&Object(h.jsxs)("div",{className:"SmartTradesTimeRangeContainer",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"From"}),Object(h.jsx)(yt.a,{dateFormat:"yyyy-MM-dd",disabled:o,selected:i.from.from?Ke()(i.from.from).toDate():Ke()().toDate(),onChange:function(e){u({from:{label:"custom",from:Ke()(e).format("YYYY-MM-DD")}})},selectsStart:!0,className:"SmartTradesDateFilter",strictParsing:!0})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Account"}),Object(h.jsx)(At.a,{isDisabled:o,onChange:function(e){u({accountId:e.value})},value:j.find((function(e){return e.value===i.accountId})),options:j,className:"AccountFilter",filterOption:function(e,t){return e.data.label_id.includes(t)}})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Status"}),Object(h.jsx)(At.a,{isDisabled:o,onChange:function(e){u({status:e.value})},value:O.find((function(e){return e.value===i.status})),options:O,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Type"}),Object(h.jsx)(At.a,{isDisabled:o,onChange:function(e){u({type:e.value})},value:p.find((function(e){return e.value===i.type})),options:p,className:"TypeFilter"})]}),Object(h.jsxs)("div",{className:"SmartTradesFilterGroup",children:[Object(h.jsx)("div",{className:"FilterTitle",children:"Sort by"}),Object(h.jsx)(At.a,{isDisabled:o,onChange:function(e){u({sorting:e.value})},value:m.find((function(e){return e.value===i.sorting})),options:m,className:"Sorting"})]})]}),!o&&Object(h.jsx)("div",{className:"SmartTradesFilters",children:"Total: ".concat(l.length)})]})},Yc=(a(361),a(362),{simple_buy:"Simple Buy",simple_sell:"Simple Sell",smart_sell:"Smart Sell",smart_trade:"Smart Trade",smart_cover:"Smart Cover",smart_buy:"Smart Buy"}),Gc=function(e){var t=e.setModalSmartTradeId,a=Object(c.useContext)(Ve).smartTradesState,n=a.list,s=a.smartTrades,i=Object(c.useContext)(Le).accountsState,o=i.accounts,l=i.list,u=r.a.useMemo((function(){return[{Header:"Account",id:"account",accessor:function(e,t){return e.account.id},disableSortBy:!0,Cell:function(e){var t=e.cell.value,a=l.filter((function(e){return e===t}))[0];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)("div",{className:"AccountMarketIcon",style:{backgroundImage:"url(".concat(o[a].market_icon,")")}}),Object(h.jsx)("div",{style:{width:"100px"},children:o[a].name})]})}},{Header:"Pair",Cell:function(e){var t=e.cell.value,a=t.split("_")[1];return Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Fa,{currency:a}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:t.split("_").reverse().join("/")})]})},accessor:"pair",disableSortBy:!0},{Header:"Side",accessor:function(e,t){return"buy"===e.position.type?"LONG":"SHORT"},id:"side",disableSortBy:!0},{Header:"Type",accessor:function(e,t){return Yc[e.data.type]},id:"type",disableSortBy:!0},{Header:"Status",accessor:function(e,t){return e.status.title},id:"status",disableSortBy:!0},{Header:"PnL, %",accessor:function(e,t){var a=parseFloat(e.profit.percent);return a?Object(h.jsx)("div",{className:a>=0?"PositiveNumber":"NegativeNumber",children:"".concat(dt({value:a,currency:"USD"}),"%")}):""},id:"pnl_percent",disableSortBy:!0},{Header:"PnL",accessor:function(e,t){var a=e.pair.split("_")[0],c=parseFloat(e.profit.volume);return c?Object(h.jsx)("div",{className:c>=0?"PositiveNumber":"NegativeNumber",children:"".concat(dt({value:c,currency:a})," ").concat(a)}):""},id:"pnl_quote",disableSortBy:!0},{Header:"PnL, $",accessor:function(e,t){var a=parseFloat(e.profit.usd);return a?Object(h.jsx)(Ca.a,{bg:a>=0?"success":"danger",style:{fontSize:"13px"},children:"".concat(dt({value:a,currency:"USD"}),"$")}):""},id:"pnl_usd",disableSortBy:!0},{Header:"Volume",accessor:function(e,t){var a=e.pair.split("_")[0],c=e.pair.split("_")[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Fa,{currency:c}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(dt({value:e.position.units.value,currency:c})," ").concat(c)})]}),Object(h.jsxs)("div",{style:{display:"flex"},children:[Object(h.jsx)(Fa,{currency:a}),Object(h.jsx)("div",{style:{marginLeft:"4px"},children:"".concat(dt({value:e.position.total.value,currency:a})," ").concat(a)})]})]})},id:"volume",disableSortBy:!0},{Header:"Margin and Leverage",accessor:function(e,t){var a=e.pair.split("_")[1];return e.leverage.enabled?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{style:{display:"flex"},children:Object(h.jsx)("div",{children:"".concat(dt({value:e.margin.total,currency:a})," ").concat(a)})}),Object(h.jsx)("div",{style:{display:"flex"},children:e.leverage&&Object(h.jsx)("div",{children:"x".concat(Math.floor(e.leverage.value)," ").concat(e.leverage.type)})})]}):""},id:"margin",disableSortBy:!0},{Header:"Created at",accessor:function(e,t){var a=Ke()(e.data.created_at);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:a.format("DD/MM/YYYY")}),Object(h.jsx)("div",{children:a.format("HH:mm")})]})},id:"created_at",disableSortBy:!0},{Header:"Closed at",accessor:function(e,t){var a=Ke()(e.data.closed_at);return e.data.closed_at&&Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{children:a.format("DD/MM/YYYY")}),Object(h.jsx)("div",{children:a.format("HH:mm")})]})},id:"closed_at",disableSortBy:!0}]}),[]),d=Object(_a.useTable)({columns:u,data:n.map((function(e){return s[e]}))}),b=d.getTableProps,j=d.getTableBodyProps,f=d.headerGroups,p=d.rows,O=d.prepareRow;return Object(h.jsx)("div",{className:"SmartTradesTable",children:Object(h.jsxs)(Qe.a,Object(v.a)(Object(v.a)({hover:!0},b()),{},{children:[Object(h.jsx)("thead",{style:{fontSize:"14px"},children:f.map((function(e){return Object(h.jsx)("tr",Object(v.a)(Object(v.a)({},e.getHeaderGroupProps()),{},{children:e.headers.map((function(e){return Object(h.jsx)("th",Object(v.a)(Object(v.a)({},e.getHeaderProps()),{},{children:Object(h.jsxs)("div",{style:{display:"flex",width:"100%"},children:[e.render("Header"),Object(h.jsx)("div",{style:{marginLeft:"auto",cursor:e.disableSortBy?"auto":"pointer"},children:e.isSorted?e.isSortedDesc?" \ud83d\udd3d":" \ud83d\udd3c":"   "})]})}))}))}))}))}),Object(h.jsx)("tbody",Object(v.a)(Object(v.a)({style:{fontSize:"14px"}},j()),{},{children:p.map((function(e,a){return O(e),Object(h.jsx)("tr",Object(v.a)(Object(v.a)({style:{height:"112px",cursor:"pointer"}},e.getRowProps()),{},{onClick:function(){t(e.original.id)},children:e.cells.map((function(e){return Object(h.jsx)("td",Object(v.a)(Object(v.a)({},e.getCellProps()),{},{children:e.render("Cell")}))}))}))}))}))]}))})},Uc=function(){var e=Object(c.useState)(""),t=Object(j.a)(e,2),a=t[0],r=t[1];return Object(h.jsxs)("div",{className:"SmartTradesList",children:[Object(h.jsx)(Rc,{}),Object(h.jsx)(Lc,{}),Object(h.jsx)(Gc,{setModalSmartTradeId:r}),!!a&&Object(h.jsx)(Mc,{modalIsOpen:!!a,setModalIsOpen:r,smartTradeId:a})]})},zc=function(){var e=Object(c.useContext)(Ve),t=e.smartTradesState,a=e.smartTradesDispatch,r=Object(c.useContext)(Ge).errorsDispatch,n=t.filters;return Object(c.useEffect)((function(){(function(e,t,a,c){return Tc.apply(this,arguments)})(a,t,r).then()}),[n]),Object(h.jsx)("div",{className:"SmartTrades",children:Object(h.jsx)(Uc,{})})},Vc=function(){return Object(h.jsx)(l.d,{children:Object(h.jsxs)(l.b,{path:"/",element:Object(h.jsx)(qe,{}),children:[Object(h.jsx)(l.b,{index:!0,element:Object(h.jsx)(tc,{})}),Object(h.jsx)(l.b,{path:":botId",element:Object(h.jsx)(Ka,{})}),Object(h.jsx)(l.b,{path:"/gridbots",element:Object(h.jsx)(Cc,{})}),Object(h.jsx)(l.b,{path:"/smarttrades",element:Object(h.jsx)(zc,{})}),Object(h.jsx)(l.b,{path:"/accounts",element:Object(h.jsx)(Dt,{})}),Object(h.jsx)(l.b,{path:"/accounts/:accountId",element:Object(h.jsx)(Nt,{})})]})})},$c=a(185),qc=a(117),Wc=a(202),Kc=a(204);$c.a.use(Wc.a).use(Kc.a).use(qc.e).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1}});$c.a;s.a.render(Object(h.jsx)(r.a.StrictMode,{children:Object(h.jsx)(o.a,{children:Object(h.jsx)(Vc,{})})}),document.getElementById("root")),i()}},[[363,1,2]]]);
//# sourceMappingURL=main.e4669ccd.chunk.js.map